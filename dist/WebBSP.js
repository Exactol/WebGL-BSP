!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).WebBSP=e()}}(function(){return function(){return function e(t,s,i){function r(a,o){if(!s[a]){if(!t[a]){var u="function"==typeof require&&require;if(!o&&u)return u(a,!0);if(n)return n(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=s[a]={exports:{}};t[a][0].call(c.exports,function(e){return r(t[a][1][e]||e)},c,c.exports,e,t,s,i)}return s[a].exports}for(var n="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}}()({"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\BSP.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e("./Utils/BinaryReader"),r=e("./Lumps/LumpType"),n=e("./Lumps/LumpHeader"),a=e("./Lumps/EdgeLump"),o=e("./Lumps/GenericLump"),u=e("./Lumps/VertexLump"),l=e("./Lumps/PlaneLump"),c=e("./Lumps/SurfEdgeLump"),d=e("./Lumps/FaceLump"),m=e("./Lumps/OriginalFaceLump"),p=e("./Lumps/BrushLump"),h=e("./Lumps/BrushSideLump"),L=e("./Lumps/NodeLump"),S=e("./Lumps/LeafLump"),f=e("./Lumps/LeafFaceLump"),P=e("./Lumps/LeafBrushLump"),b=e("./Lumps/TexInfoLump"),g=e("./Lumps/TexDataLump"),v=e("./Lumps/TexDataStringTableLump"),D=e("./Lumps/TexDataStringDataLump"),B=e("./Lumps/ModelLump"),M=e("./Lumps/EntityLump"),y=e("./Lumps/GameLump"),O=e("./Lumps/CubemapLump"),T=e("./Lumps/LightingLump"),j=e("./Lumps/LeafAmbientLightingLump"),R=e("./Lumps/LeafAmbientIndexLump"),I=e("./Lumps/LeafAmbientIndexHDRLump"),C=e("./Lumps/DispInfoLump"),W=e("./Lumps/DispVertLump"),_=e("./Lumps/DispTrisLump"),U=e("./Lumps/VisibilityLump");s.BSP=class{constructor(e){this.headerLumps=[],this.lumps={},this.fileData=e,this.reader=new i.BinaryReader(this.fileData),console.log("--Header--"),this.ident="";for(let e=0;e<4;e++)this.ident+=this.reader.readChar();console.log("Ident: "+this.ident),this.version=this.reader.readInt32(),console.log("Version: "+this.version),console.log("--Reading Header Lumps--");for(let e=0;e<64;e++){const t=this.getLumpType(e);this.lumps[e]=new t(new n.LumpHeader(e,this.reader.readBytes(16)),this.fileData)}}readLump(e){if(this.lumps[e].initialized)return this.lumps[e];const t=this.lumps[e];return t.read(),t}printLumps(){for(const e in this.lumps)if(this.lumps.hasOwnProperty(e)){const t=this.lumps[e];t.initialized?console.log(t.toString()):(this.readLump(Number.parseInt(e)),console.log(t))}}getLumpType(e){switch(e){case r.LumpType.Entities:return M.EntityLump;case r.LumpType.Planes:return l.PlaneLump;case r.LumpType.TexData:return g.TexDataLump;case r.LumpType.Vertexes:return u.VertexLump;case r.LumpType.Visibility:return U.VisibilityLump;case r.LumpType.Nodes:return L.NodeLump;case r.LumpType.TexInfo:return b.TexInfoLump;case r.LumpType.Faces:return d.FaceLump;case r.LumpType.Lighting:return T.LightingLump;case r.LumpType.Leafs:return S.LeafLump;case r.LumpType.Edges:return a.EdgeLump;case r.LumpType.SurfEdges:return c.SurfEdgeLump;case r.LumpType.Models:return B.ModelLump;case r.LumpType.LeafFaces:return f.LeafFaceLump;case r.LumpType.LeafBrushes:return P.LeafBrushLump;case r.LumpType.Brushes:return p.BrushLump;case r.LumpType.BrushSides:return h.BrushSideLump;case r.LumpType.DispInfo:return C.DispInfoLump;case r.LumpType.OriginalFaces:return m.OriginalFaceLump;case r.LumpType.DispVerts:return W.DispVertLump;case r.LumpType.Game:return y.GameLump;case r.LumpType.Cubemaps:return O.CubemapLump;case r.LumpType.TexDataStringData:return D.TexDataStringDataLump;case r.LumpType.TexDataStringTable:return v.TexDataStringTableLump;case r.LumpType.DispTris:return _.DispTrisLump;case r.LumpType.LeafAmbientIndexHdr:return I.LeafAmbientIndexHdrLump;case r.LumpType.LeafAmbientIndex:return R.LeafAmbientIndexLump;case r.LumpType.LeafAmbientLighting:return j.LeafAmbientLightingLump;default:return o.GenericLump}}}},{"./Lumps/BrushLump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\BrushLump.js","./Lumps/BrushSideLump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\BrushSideLump.js","./Lumps/CubemapLump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\CubemapLump.js","./Lumps/DispInfoLump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\DispInfoLump.js","./Lumps/DispTrisLump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\DispTrisLump.js","./Lumps/DispVertLump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\DispVertLump.js","./Lumps/EdgeLump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\EdgeLump.js","./Lumps/EntityLump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\EntityLump.js","./Lumps/FaceLump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\FaceLump.js","./Lumps/GameLump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\GameLump.js","./Lumps/GenericLump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\GenericLump.js","./Lumps/LeafAmbientIndexHDRLump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LeafAmbientIndexHDRLump.js","./Lumps/LeafAmbientIndexLump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LeafAmbientIndexLump.js","./Lumps/LeafAmbientLightingLump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LeafAmbientLightingLump.js","./Lumps/LeafBrushLump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LeafBrushLump.js","./Lumps/LeafFaceLump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LeafFaceLump.js","./Lumps/LeafLump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LeafLump.js","./Lumps/LightingLump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LightingLump.js","./Lumps/LumpHeader":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LumpHeader.js","./Lumps/LumpType":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LumpType.js","./Lumps/ModelLump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\ModelLump.js","./Lumps/NodeLump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\NodeLump.js","./Lumps/OriginalFaceLump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\OriginalFaceLump.js","./Lumps/PlaneLump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\PlaneLump.js","./Lumps/SurfEdgeLump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\SurfEdgeLump.js","./Lumps/TexDataLump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\TexDataLump.js","./Lumps/TexDataStringDataLump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\TexDataStringDataLump.js","./Lumps/TexDataStringTableLump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\TexDataStringTableLump.js","./Lumps/TexInfoLump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\TexInfoLump.js","./Lumps/VertexLump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\VertexLump.js","./Lumps/VisibilityLump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\VisibilityLump.js","./Utils/BinaryReader":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Utils\\BinaryReader.js"}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\BrushLump.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e("./Lump"),r=e("./LumpType"),n=e("../Utils/BinaryReader"),a=e("../Structs/Brush");s.BrushLump=class extends i.Lump{constructor(e,t){super(r.LumpType.Brushes,e,t),this.brushes=[]}read(){const e=new n.BinaryReader(this.data);for(let t=0;t<this.header.lumpLength;t+=3*n.INT_32_SIZE)this.brushes.push(new a.Brush(e.readInt32(),e.readInt32(),e.readInt32()));this.initialized=!0}toString(){let e=super.toString();return e+=`\n${r.LumpType[this.lumpType]}: \n${this.brushes.join("\n")}`}}},{"../Structs/Brush":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Structs\\Brush.js","../Utils/BinaryReader":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Utils\\BinaryReader.js","./Lump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\Lump.js","./LumpType":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LumpType.js"}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\BrushSideLump.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e("./Lump"),r=e("./LumpType"),n=e("../Utils/BinaryReader"),a=e("../Structs/BrushSide");s.BrushSideLump=class extends i.Lump{constructor(e,t){super(r.LumpType.BrushSides,e,t),this.brushes=[]}read(){const e=new n.BinaryReader(this.data);for(let t=0;t<this.header.lumpLength;t+=3*n.INT_16_SIZE+n.UINT_16_SIZE)this.brushes.push(new a.BrushSide(e.readUInt16(),e.readInt16(),e.readInt16(),e.readInt16()));this.initialized=!0}toString(){let e=super.toString();return e+=`\n${r.LumpType[this.lumpType]}: \n${this.brushes.join("\n")}`}}},{"../Structs/BrushSide":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Structs\\BrushSide.js","../Utils/BinaryReader":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Utils\\BinaryReader.js","./Lump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\Lump.js","./LumpType":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LumpType.js"}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\CubemapLump.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e("./Lump"),r=e("./LumpType"),n=e("../Utils/BinaryReader"),a=e("../Structs/Cubemap");s.CubemapLump=class extends i.Lump{constructor(e,t){super(r.LumpType.Cubemaps,e,t),this.cubemaps=[]}read(){const e=new n.BinaryReader(this.data);for(let t=0;t<this.header.lumpLength;t+=16)this.cubemaps.push(new a.Cubemap([e.readInt32(),e.readInt32(),e.readInt32()],e.readInt32()));this.initialized=!0}toString(){let e=super.toString();return e+=`\n${r.LumpType[this.lumpType]}: \n${this.cubemaps.join("\n")}`}}},{"../Structs/Cubemap":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Structs\\Cubemap.js","../Utils/BinaryReader":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Utils\\BinaryReader.js","./Lump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\Lump.js","./LumpType":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LumpType.js"}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\DispInfoLump.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e("./Lump"),r=e("./LumpType"),n=e("../Utils/BinaryReader"),a=e("../Structs/DispInfo"),o=e("gl-matrix"),u=e("../Structs/DispNeighbor"),l=e("../Structs/DispSubNeighbor"),c=e("../Structs/DispCornerNeighbor");s.DispInfoLump=class extends i.Lump{constructor(e,t){super(r.LumpType.DispInfo,e,t),this.dispInfos=[]}read(){const e=new n.BinaryReader(this.data);for(let t=0;t<this.header.lumpLength;t+=176){const t=o.vec3.fromValues(e.readFloat(),e.readFloat(),e.readFloat()),s=e.readInt32(),i=e.readInt32(),r=e.readInt32(),d=e.readInt32(),m=e.readFloat(),p=e.readInt32(),h=e.readUInt16(),L=e.readInt32(),S=e.readInt32(),f=[];for(let t=0;t<4;t++){const t=[];for(let s=0;s<2;s++){const s=e.readUInt16(),i=e.readUInt8(),r=e.readUInt8();e.seek(1,n.SeekOrigin.Current);const a=e.readUInt8();t.push(new l.DispSubNeighbor(s,i,r,a))}f.push(new u.DispNeighbor(t))}const P=[];for(let t=0;t<4;t++)P.push(new c.DispCornerNeighbors([e.readUInt16(),e.readUInt16(),e.readUInt16(),e.readUInt16()],e.readUInt8()));e.seek(6,n.SeekOrigin.Current);const b=[];for(let t=0;t<10;t++)b.push(e.readUInt32());this.dispInfos.push(new a.DispInfo(t,s,i,r,d,m,p,h,L,S,f,P,b))}this.initialized=!0}toString(){let e=super.toString();return e+=`\n${r.LumpType[this.lumpType]}: \n${this.dispInfos.join("\n")}`}}},{"../Structs/DispCornerNeighbor":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Structs\\DispCornerNeighbor.js","../Structs/DispInfo":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Structs\\DispInfo.js","../Structs/DispNeighbor":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Structs\\DispNeighbor.js","../Structs/DispSubNeighbor":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Structs\\DispSubNeighbor.js","../Utils/BinaryReader":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Utils\\BinaryReader.js","./Lump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\Lump.js","./LumpType":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LumpType.js","gl-matrix":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\node_modules\\gl-matrix\\dist\\gl-matrix.js"}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\DispTrisLump.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e("./Lump"),r=e("../Utils/BinaryReader"),n=e("./LumpType");s.DispTrisLump=class extends i.Lump{constructor(e,t){super(n.LumpType.DispTris,e,t),this.dispTris=[]}read(){const e=new r.BinaryReader(this.data);for(let t=0;t<this.header.lumpLength;t+=r.UINT_16_SIZE)this.dispTris.push(e.readUInt16());this.initialized=!0}toString(){let e=super.toString();return e+=`\n${n.LumpType[this.lumpType]}: [${this.dispTris.join(", ")}]`}}},{"../Utils/BinaryReader":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Utils\\BinaryReader.js","./Lump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\Lump.js","./LumpType":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LumpType.js"}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\DispVertLump.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e("./Lump"),r=e("../Utils/BinaryReader"),n=e("./LumpType"),a=e("../Structs/DispVert"),o=e("gl-matrix");s.DispVertLump=class extends i.Lump{constructor(e,t){super(n.LumpType.DispVerts,e,t),this.dispVerts=[]}read(){const e=new r.BinaryReader(this.data);for(let t=0;t<this.header.lumpLength;t+=5*r.FLOAT_SIZE)this.dispVerts.push(new a.DispVert(o.vec3.fromValues(e.readFloat(),e.readFloat(),e.readFloat()),e.readFloat(),e.readFloat()));this.initialized=!0}toString(){let e=super.toString();return e+=`\n${n.LumpType[this.lumpType]}: ${this.dispVerts.join("\n")}`}}},{"../Structs/DispVert":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Structs\\DispVert.js","../Utils/BinaryReader":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Utils\\BinaryReader.js","./Lump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\Lump.js","./LumpType":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LumpType.js","gl-matrix":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\node_modules\\gl-matrix\\dist\\gl-matrix.js"}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\EdgeLump.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e("./Lump"),r=e("../Structs/Edge"),n=e("../Utils/BinaryReader"),a=e("./LumpType");s.EdgeLump=class extends i.Lump{constructor(e,t){super(a.LumpType.Edges,e,t),this.edges=[]}read(){const e=new n.BinaryReader(this.data);for(let t=0;t<this.header.lumpLength;t+=2*n.UINT_16_SIZE)this.edges.push(new r.Edge(e.readUInt16(),e.readUInt16()));this.initialized=!0}toString(){let e=super.toString();return e+=`\n${a.LumpType[this.lumpType]}: [${this.edges.join(", ")}]`}}},{"../Structs/Edge":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Structs\\Edge.js","../Utils/BinaryReader":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Utils\\BinaryReader.js","./Lump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\Lump.js","./LumpType":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LumpType.js"}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\EntityLump.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e("./Lump"),r=e("./LumpType"),n=e("../Utils/BinaryReader");s.EntityLump=class extends i.Lump{constructor(e,t){super(r.LumpType.Entities,e,t),this.textBuffer=""}read(){const e=new n.BinaryReader(this.data);let t=e.readString(!1);for(;null!=t;)this.textBuffer+=t,t=e.readString(!1);this.initialized=!0}toString(){let e=super.toString();return e+=`\nTextBuffer: \n${this.textBuffer}`}}},{"../Utils/BinaryReader":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Utils\\BinaryReader.js","./Lump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\Lump.js","./LumpType":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LumpType.js"}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\FaceLump.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e("./Lump"),r=e("./LumpType"),n=e("../Utils/BinaryReader"),a=e("../Structs/Face");s.FaceLump=class extends i.Lump{constructor(e,t){super(r.LumpType.Faces,e,t),this.faces=[]}read(){const e=new n.BinaryReader(this.data);for(let t=0;t<this.header.lumpLength;t+=56)this.faces.push(new a.Face(e.readInt16(),e.readInt8(),e.readInt8(),e.readInt32(),e.readInt16(),e.readInt16(),e.readInt16(),e.readInt16(),e.readBytes(4),e.readInt32(),e.readFloat(),[e.readInt32(),e.readInt32()],[e.readInt32(),e.readInt32()],e.readInt32(),e.readUInt16(),e.readUInt16(),e.readUInt32()));this.initialized=!0}toString(){let e=super.toString();return e+=`\n${r.LumpType[this.lumpType]}: \n${this.faces.join("\n")}`}}},{"../Structs/Face":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Structs\\Face.js","../Utils/BinaryReader":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Utils\\BinaryReader.js","./Lump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\Lump.js","./LumpType":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LumpType.js"}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\GameLump.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e("./Lump"),r=e("./LumpType"),n=e("../Utils/BinaryReader"),a=e("../Structs/GameLumpStruct");s.GameLump=class extends i.Lump{constructor(e,t){super(r.LumpType.Game,e,t),this.lumpCount=0,this.lumps=[]}read(){const e=new n.BinaryReader(this.data);this.lumpCount=e.readInt32();for(let t=0;t<this.lumpCount;t++)this.lumps.push(new a.GameLumpStruct(e.readInt32(),e.readUInt16(),e.readUInt16(),e.readInt32(),e.readInt32()));this.initialized=!0}toString(){let e=super.toString();return e+=`\nLump Count: ${this.lumpCount}\n\t\t${r.LumpType[this.lumpType]}: \n${this.lumps.join("\n")}`}}},{"../Structs/GameLumpStruct":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Structs\\GameLumpStruct.js","../Utils/BinaryReader":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Utils\\BinaryReader.js","./Lump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\Lump.js","./LumpType":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LumpType.js"}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\GenericLump.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e("./Lump"),r=e("./LumpType");s.GenericLump=class extends i.Lump{constructor(e,t){super(r.LumpType.Generic,e,t)}}},{"./Lump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\Lump.js","./LumpType":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LumpType.js"}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LeafAmbientIndexHDRLump.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e("./Lump"),r=e("./LumpType"),n=e("../Utils/BinaryReader"),a=e("../Structs/LeafAmbientIndex");s.LeafAmbientIndexHdrLump=class extends i.Lump{constructor(e,t){super(r.LumpType.LeafAmbientIndexHdr,e,t),this.leafAmbientIndex=[]}read(){const e=new n.BinaryReader(this.data);for(let t=0;t<this.header.lumpLength;t+=2*n.UINT_16_SIZE)this.leafAmbientIndex.push(new a.LeafAmbientIndex(e.readUInt16(),e.readUInt16()));this.initialized=!0}toString(){let e=super.toString();return e+=`\n${r.LumpType[this.lumpType]}: \n${this.leafAmbientIndex.join("\n\n")}`}}},{"../Structs/LeafAmbientIndex":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Structs\\LeafAmbientIndex.js","../Utils/BinaryReader":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Utils\\BinaryReader.js","./Lump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\Lump.js","./LumpType":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LumpType.js"}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LeafAmbientIndexLump.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e("./Lump"),r=e("./LumpType"),n=e("../Utils/BinaryReader"),a=e("../Structs/LeafAmbientIndex");s.LeafAmbientIndexLump=class extends i.Lump{constructor(e,t){super(r.LumpType.LeafAmbientIndex,e,t),this.leafAmbientIndex=[]}read(){const e=new n.BinaryReader(this.data);for(let t=0;t<this.header.lumpLength;t+=2*n.UINT_16_SIZE)this.leafAmbientIndex.push(new a.LeafAmbientIndex(e.readUInt16(),e.readUInt16()));this.initialized=!0}toString(){let e=super.toString();return e+=`\n${r.LumpType[this.lumpType]}: \n${this.leafAmbientIndex.join("\n\n")}`}}},{"../Structs/LeafAmbientIndex":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Structs\\LeafAmbientIndex.js","../Utils/BinaryReader":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Utils\\BinaryReader.js","./Lump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\Lump.js","./LumpType":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LumpType.js"}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LeafAmbientLightingLump.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e("./Lump"),r=e("./LumpType"),n=e("../Utils/BinaryReader"),a=e("../Structs/ColorRGBExp32"),o=e("../Structs/LeafAmbientLighting"),u=e("../Structs/CompressedLightCube");s.LeafAmbientLightingLump=class extends i.Lump{constructor(e,t){super(r.LumpType.LeafAmbientLighting,e,t),this.leafAmbientLighting=[]}read(){const e=new n.BinaryReader(this.data);for(let t=0;t<this.header.lumpLength;t+=28)this.leafAmbientLighting.push(new o.LeafAmbientLighting(new u.CompressedLightCube([new a.ColorRGBExp32(e.readUInt8(),e.readUInt8(),e.readUInt8(),e.readInt8()),new a.ColorRGBExp32(e.readUInt8(),e.readUInt8(),e.readUInt8(),e.readInt8()),new a.ColorRGBExp32(e.readUInt8(),e.readUInt8(),e.readUInt8(),e.readInt8()),new a.ColorRGBExp32(e.readUInt8(),e.readUInt8(),e.readUInt8(),e.readInt8()),new a.ColorRGBExp32(e.readUInt8(),e.readUInt8(),e.readUInt8(),e.readInt8()),new a.ColorRGBExp32(e.readUInt8(),e.readUInt8(),e.readUInt8(),e.readInt8())]),e.readUInt8(),e.readUInt8(),e.readUInt8(),e.readUInt8()));this.initialized=!0}toString(){let e=super.toString();return e+=`\n${r.LumpType[this.lumpType]}: \n${this.leafAmbientLighting.join("\n")}`}}},{"../Structs/ColorRGBExp32":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Structs\\ColorRGBExp32.js","../Structs/CompressedLightCube":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Structs\\CompressedLightCube.js","../Structs/LeafAmbientLighting":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Structs\\LeafAmbientLighting.js","../Utils/BinaryReader":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Utils\\BinaryReader.js","./Lump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\Lump.js","./LumpType":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LumpType.js"}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LeafBrushLump.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e("./Lump"),r=e("./LumpType"),n=e("../Utils/BinaryReader");s.LeafBrushLump=class extends i.Lump{constructor(e,t){super(r.LumpType.LeafBrushes,e,t),this.leafBrushes=[]}read(){const e=new n.BinaryReader(this.data);for(let t=0;t<this.header.lumpLength;t+=n.UINT_16_SIZE)this.leafBrushes.push(e.readUInt16());this.initialized=!0}toString(){let e=super.toString();return e+=`\n${r.LumpType[this.lumpType]}: [${this.leafBrushes.join(", ")}]`}}},{"../Utils/BinaryReader":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Utils\\BinaryReader.js","./Lump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\Lump.js","./LumpType":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LumpType.js"}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LeafFaceLump.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e("./Lump"),r=e("./LumpType"),n=e("../Utils/BinaryReader");s.LeafFaceLump=class extends i.Lump{constructor(e,t){super(r.LumpType.LeafFaces,e,t),this.leafFaces=[]}read(){const e=new n.BinaryReader(this.data);for(let t=0;t<this.header.lumpLength;t+=n.UINT_16_SIZE)this.leafFaces.push(e.readUInt16());this.initialized=!0}toString(){let e=super.toString();return e+=`\n${r.LumpType[this.lumpType]}: [${this.leafFaces.join(", ")}]`}}},{"../Utils/BinaryReader":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Utils\\BinaryReader.js","./Lump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\Lump.js","./LumpType":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LumpType.js"}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LeafLump.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e("./Lump"),r=e("./LumpType"),n=e("../Utils/BinaryReader"),a=e("../Structs/Leaf");s.LeafLump=class extends i.Lump{constructor(e,t){super(r.LumpType.Leafs,e,t),this.leaves=[]}read(){const e=new n.BinaryReader(this.data);for(let t=0;t<this.header.lumpLength;t+=32){const t=e.readInt32(),s=e.readInt16(),i=e.readInt16(),r=511&i,n=127&i,o=[e.readInt16(),e.readInt16(),e.readInt16()],u=[e.readInt16(),e.readInt16(),e.readInt16()],l=e.readUInt16(),c=e.readUInt16(),d=e.readUInt16(),m=e.readUInt16(),p=e.readInt16();e.readInt16(),this.leaves.push(new a.Leaf(t,s,r,n,o,u,l,c,d,m,p))}this.initialized=!0}toString(){let e=super.toString();return e+=`\n${r.LumpType[this.lumpType]}: \n${this.leaves.join("\n")}`}}},{"../Structs/Leaf":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Structs\\Leaf.js","../Utils/BinaryReader":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Utils\\BinaryReader.js","./Lump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\Lump.js","./LumpType":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LumpType.js"}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LightingLump.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e("./Lump"),r=e("./LumpType"),n=e("../Utils/BinaryReader"),a=e("../Structs/ColorRGBExp32");s.LightingLump=class extends i.Lump{constructor(e,t){super(r.LumpType.Lighting,e,t),this.lightmapSamples=[]}read(){const e=new n.BinaryReader(this.data);for(let t=0;t<this.header.lumpLength;t+=4)this.lightmapSamples.push(new a.ColorRGBExp32(e.readUInt8(),e.readUInt8(),e.readUInt8(),e.readInt8()));this.initialized=!0}toString(){let e=super.toString();return e+=`\n${r.LumpType[this.lumpType]}: \n${this.lightmapSamples.join("\n")}`}}},{"../Structs/ColorRGBExp32":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Structs\\ColorRGBExp32.js","../Utils/BinaryReader":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Utils\\BinaryReader.js","./Lump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\Lump.js","./LumpType":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LumpType.js"}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\Lump.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e("./LumpType"),r=e("../Utils/BinaryReader"),n=1095588428;s.Lump=class{constructor(e,t,s){this.initialized=!1,this.lumpDependencies=[],this.lumpType=e,this.header=t,this.data=s.slice(this.header.fileOffset,this.header.fileOffset+this.header.lumpLength);let i=!1;for(let e=0;e<this.header.fourCC.length;e++)if(0!==this.header.fourCC[e]){i=!0;break}i&&this.decompressLump()}read(){}decompressLump(){const e=new r.BinaryReader(this.data);if(e.readInt32()!==n)return;e.readInt32(),e.readInt32();const t=[];for(let s=0;s<5;s++)t.push(e.readUInt8());throw Error("Decompressing lumps is not implemented.")}toString(){return`${i.LumpType[this.lumpType]}\n\t\t${this.header} \n\t\tLump:\n\t\t\tData: ${this.data}\n\t\t\tInitialized: ${this.initialized}`}}},{"../Utils/BinaryReader":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Utils\\BinaryReader.js","./LumpType":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LumpType.js"}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LumpHeader.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e("../Utils/BinaryReader");s.LumpHeader=class{constructor(e,t){const s=new i.BinaryReader(t.buffer,t.byteOffset);this.fileOffset=s.readInt32(),this.lumpLength=s.readInt32(),this.version=s.readInt32(),this.fourCC=s.readBytes(4)}toString(){return`Offset: ${this.fileOffset}\n\t\t\tLength: ${this.lumpLength} \n\t\t\tVersion: ${this.version}\n\t\t\tFourCC: ${this.fourCC}`}}},{"../Utils/BinaryReader":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Utils\\BinaryReader.js"}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LumpType.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),function(e){e[e.Entities=0]="Entities",e[e.Planes=1]="Planes",e[e.TexData=2]="TexData",e[e.Vertexes=3]="Vertexes",e[e.Visibility=4]="Visibility",e[e.Nodes=5]="Nodes",e[e.TexInfo=6]="TexInfo",e[e.Faces=7]="Faces",e[e.Lighting=8]="Lighting",e[e.Occlusion=9]="Occlusion",e[e.Leafs=10]="Leafs",e[e.FaceIds=11]="FaceIds",e[e.Edges=12]="Edges",e[e.SurfEdges=13]="SurfEdges",e[e.Models=14]="Models",e[e.WorldLights=15]="WorldLights",e[e.LeafFaces=16]="LeafFaces",e[e.LeafBrushes=17]="LeafBrushes",e[e.Brushes=18]="Brushes",e[e.BrushSides=19]="BrushSides",e[e.Areas=20]="Areas",e[e.AreaPortals=21]="AreaPortals",e[e.Portals=22]="Portals",e[e.Unused0=22]="Unused0",e[e.PropCollsion=22]="PropCollsion",e[e.Clusters=23]="Clusters",e[e.Unused1=23]="Unused1",e[e.PropHulls=23]="PropHulls",e[e.PortalVerts=24]="PortalVerts",e[e.Unused2=24]="Unused2",e[e.PropHullVerts=24]="PropHullVerts",e[e.ClusterPortals=25]="ClusterPortals",e[e.Unused3=25]="Unused3",e[e.PropTris=25]="PropTris",e[e.DispInfo=26]="DispInfo",e[e.OriginalFaces=27]="OriginalFaces",e[e.PhysDisp=28]="PhysDisp",e[e.PhysCollide=29]="PhysCollide",e[e.VertNormals=30]="VertNormals",e[e.VertNormalIndices=31]="VertNormalIndices",e[e.DispLightmapAlphas=32]="DispLightmapAlphas",e[e.DispVerts=33]="DispVerts",e[e.DispLightmapSamplePositions=34]="DispLightmapSamplePositions",e[e.Game=35]="Game",e[e.LeafWaterData=36]="LeafWaterData",e[e.Primitives=37]="Primitives",e[e.PrimVerts=38]="PrimVerts",e[e.PrimIndices=39]="PrimIndices",e[e.Pakfile=40]="Pakfile",e[e.ClipPortalVerts=41]="ClipPortalVerts",e[e.Cubemaps=42]="Cubemaps",e[e.TexDataStringData=43]="TexDataStringData",e[e.TexDataStringTable=44]="TexDataStringTable",e[e.Overlays=45]="Overlays",e[e.LeafMinDistToWater=46]="LeafMinDistToWater",e[e.FaceMacroTextureInfo=47]="FaceMacroTextureInfo",e[e.DispTris=48]="DispTris",e[e.PhysCollideSurface=49]="PhysCollideSurface",e[e.PropBlob=49]="PropBlob",e[e.WaterOverlays=50]="WaterOverlays",e[e.LightmapPages=51]="LightmapPages",e[e.LeafAmbientIndexHdr=51]="LeafAmbientIndexHdr",e[e.LightmapPageInfos=52]="LightmapPageInfos",e[e.LeafAmbientIndex=52]="LeafAmbientIndex",e[e.LightingHdr=53]="LightingHdr",e[e.WorldLightsHdr=54]="WorldLightsHdr",e[e.LeafAmbientLightingHdr=55]="LeafAmbientLightingHdr",e[e.LeafAmbientLighting=56]="LeafAmbientLighting",e[e.XZipPackfile=57]="XZipPackfile",e[e.FacesHdr=58]="FacesHdr",e[e.MapFlags=59]="MapFlags",e[e.OverlayFades=60]="OverlayFades",e[e.OverlaySystemLevels=61]="OverlaySystemLevels",e[e.PhysLevel=62]="PhysLevel",e[e.DispMultiBlend=63]="DispMultiBlend",e[e.Generic=-1]="Generic"}(s.LumpType||(s.LumpType={}))},{}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\ModelLump.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e("./Lump"),r=e("./LumpType"),n=e("../Utils/BinaryReader"),a=e("../Structs/Model"),o=e("gl-matrix");s.ModelLump=class extends i.Lump{constructor(e,t){super(r.LumpType.Models,e,t),this.models=[]}read(){const e=new n.BinaryReader(this.data);for(let t=0;t<this.header.lumpLength;t+=48)this.models.push(new a.Model(o.vec3.fromValues(e.readFloat(),e.readFloat(),e.readFloat()),o.vec3.fromValues(e.readFloat(),e.readFloat(),e.readFloat()),o.vec3.fromValues(e.readFloat(),e.readFloat(),e.readFloat()),e.readInt32(),e.readInt32(),e.readInt32()));this.initialized=!0}toString(){let e=super.toString();return e+=`\n${r.LumpType[this.lumpType]}: \n${this.models.join("\n")}`}}},{"../Structs/Model":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Structs\\Model.js","../Utils/BinaryReader":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Utils\\BinaryReader.js","./Lump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\Lump.js","./LumpType":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LumpType.js","gl-matrix":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\node_modules\\gl-matrix\\dist\\gl-matrix.js"}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\NodeLump.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e("./Lump"),r=e("./LumpType"),n=e("../Utils/BinaryReader"),a=e("../Structs/Node");s.NodeLump=class extends i.Lump{constructor(e,t){super(r.LumpType.Nodes,e,t),this.nodes=[]}read(){const e=new n.BinaryReader(this.data);for(let t=0;t<this.header.lumpLength;t+=32)this.nodes.push(new a.Node(e.readInt32(),[e.readInt32(),e.readInt32()],[e.readInt16(),e.readInt16(),e.readInt16()],[e.readInt16(),e.readInt16(),e.readInt16()],e.readUInt16(),e.readUInt16(),e.readInt16(),e.readInt16()));this.initialized=!0}toString(){let e=super.toString();return e+=`\n${r.LumpType[this.lumpType]}: \n${this.nodes.join("\n")}`}}},{"../Structs/Node":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Structs\\Node.js","../Utils/BinaryReader":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Utils\\BinaryReader.js","./Lump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\Lump.js","./LumpType":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LumpType.js"}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\OriginalFaceLump.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e("./Lump"),r=e("./LumpType"),n=e("../Utils/BinaryReader"),a=e("../Structs/Face");s.OriginalFaceLump=class extends i.Lump{constructor(e,t){super(r.LumpType.OriginalFaces,e,t),this.faces=[]}read(){const e=new n.BinaryReader(this.data);for(let t=0;t<this.header.lumpLength;t+=56)this.faces.push(new a.Face(e.readInt16(),e.readInt8(),e.readInt8(),e.readInt32(),e.readInt16(),e.readInt16(),e.readInt16(),e.readInt16(),e.readBytes(4),e.readInt32(),e.readFloat(),[e.readInt32(),e.readInt32()],[e.readInt32(),e.readInt32()],e.readInt32(),e.readUInt16(),e.readUInt16(),e.readUInt32()));this.initialized=!0}toString(){let e=super.toString();return e+=`\n${r.LumpType[this.lumpType]}: \n${this.faces.join("\n")}`}}},{"../Structs/Face":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Structs\\Face.js","../Utils/BinaryReader":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Utils\\BinaryReader.js","./Lump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\Lump.js","./LumpType":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LumpType.js"}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\PlaneLump.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e("./Lump"),r=e("../Structs/Plane"),n=e("./LumpType"),a=e("../Utils/BinaryReader"),o=e("gl-matrix");s.PlaneLump=class extends i.Lump{constructor(e,t){super(n.LumpType.Planes,e,t),this.planes=[]}read(){const e=new a.BinaryReader(this.data);for(let t=0;t<this.header.lumpLength;t+=4*a.FLOAT_SIZE+a.INT_32_SIZE)this.planes.push(new r.Plane(o.vec3.fromValues(e.readFloat(),e.readFloat(),e.readFloat()),e.readFloat(),e.readInt32()));this.initialized=!0}toString(){let e=super.toString();return e+=`\n${n.LumpType[this.lumpType]}: \n${this.planes.join("\n")}`}}},{"../Structs/Plane":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Structs\\Plane.js","../Utils/BinaryReader":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Utils\\BinaryReader.js","./Lump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\Lump.js","./LumpType":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LumpType.js","gl-matrix":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\node_modules\\gl-matrix\\dist\\gl-matrix.js"}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\SurfEdgeLump.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e("./Lump"),r=e("./LumpType"),n=e("../Utils/BinaryReader");s.SurfEdgeLump=class extends i.Lump{constructor(e,t){super(r.LumpType.SurfEdges,e,t),this.surfEdges=[]}read(){const e=new n.BinaryReader(this.data);for(let t=0;t<this.header.lumpLength;t+=n.INT_32_SIZE)this.surfEdges.push(e.readInt32());this.initialized=!0}toString(){let e=super.toString();return e+=`\n${r.LumpType[this.lumpType]}: [${this.surfEdges.join(", ")}]`}}},{"../Utils/BinaryReader":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Utils\\BinaryReader.js","./Lump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\Lump.js","./LumpType":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LumpType.js"}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\TexDataLump.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e("./Lump"),r=e("./LumpType"),n=e("../Utils/BinaryReader"),a=e("../Structs/TexData"),o=e("gl-matrix");s.TexDataLump=class extends i.Lump{constructor(e,t){super(r.LumpType.TexData,e,t),this.texDatas=[]}read(){const e=new n.BinaryReader(this.data);for(let t=0;t<this.header.lumpLength;t+=3*n.FLOAT_SIZE+5*n.INT_32_SIZE)this.texDatas.push(new a.TexData(o.vec3.fromValues(e.readFloat(),e.readFloat(),e.readFloat()),e.readInt32(),e.readInt32(),e.readInt32(),e.readInt32(),e.readInt32()));this.initialized=!0}toString(){let e=super.toString();return e+=`\n${r.LumpType[this.lumpType]}: ${this.texDatas.join("\n")}`}}},{"../Structs/TexData":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Structs\\TexData.js","../Utils/BinaryReader":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Utils\\BinaryReader.js","./Lump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\Lump.js","./LumpType":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LumpType.js","gl-matrix":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\node_modules\\gl-matrix\\dist\\gl-matrix.js"}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\TexDataStringDataLump.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e("./Lump"),r=e("./LumpType"),n=e("../Utils/BinaryReader");s.TexDataStringDataLump=class extends i.Lump{constructor(e,t){super(r.LumpType.TexDataStringData,e,t),this.stringData=[]}read(){const e=new n.BinaryReader(this.data);let t=e.readString(!1);for(;null!=t;)this.stringData.push(t),t=e.readString(!1);this.initialized=!0}toString(){let e=super.toString();return e+=`\n${r.LumpType[this.lumpType]}: [${this.stringData.join(", ")}]`}readStringAtOffset(e){return new n.BinaryReader(this.data,e).readString()}readStrings(e){let t="",s=e.readChar();for(;"\0"!==s&&e.position+n.CHAR_SIZE<=e.length;)t+=s,s=e.readChar()}}},{"../Utils/BinaryReader":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Utils\\BinaryReader.js","./Lump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\Lump.js","./LumpType":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LumpType.js"}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\TexDataStringTableLump.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e("./Lump"),r=e("./LumpType"),n=e("../Utils/BinaryReader");s.TexDataStringTableLump=class extends i.Lump{constructor(e,t){super(r.LumpType.TexDataStringTable,e,t),this.texDataTable=[]}read(){const e=new n.BinaryReader(this.data);for(let t=0;t<this.header.lumpLength;t+=n.INT_32_SIZE)this.texDataTable.push(e.readInt32());this.initialized=!0}toString(){let e=super.toString();return e+=`\n${r.LumpType[this.lumpType]}: [${this.texDataTable.join(", ")}]`}}},{"../Utils/BinaryReader":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Utils\\BinaryReader.js","./Lump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\Lump.js","./LumpType":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LumpType.js"}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\TexInfoLump.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e("./Lump"),r=e("./LumpType"),n=e("../Utils/BinaryReader"),a=e("../Structs/TexInfo");s.TexInfoLump=class extends i.Lump{constructor(e,t){super(r.LumpType.TexInfo,e,t),this.texInfos=[]}read(){const e=new n.BinaryReader(this.data);for(let t=0;t<this.header.lumpLength;t+=72)this.texInfos.push(new a.TexInfo([[e.readFloat(),e.readFloat(),e.readFloat(),e.readFloat()],[e.readFloat(),e.readFloat(),e.readFloat(),e.readFloat()]],[[e.readFloat(),e.readFloat(),e.readFloat(),e.readFloat()],[e.readFloat(),e.readFloat(),e.readFloat(),e.readFloat()]],e.readInt32(),e.readInt32()));this.initialized=!0}toString(){let e=super.toString();return e+=`\n${r.LumpType[this.lumpType]}: ${this.texInfos.join("\n")}`}}},{"../Structs/TexInfo":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Structs\\TexInfo.js","../Utils/BinaryReader":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Utils\\BinaryReader.js","./Lump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\Lump.js","./LumpType":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LumpType.js"}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\VertexLump.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e("./Lump"),r=e("../Utils/BinaryReader"),n=e("./LumpType"),a=e("gl-matrix");s.VertexLump=class extends i.Lump{constructor(e,t){super(n.LumpType.Vertexes,e,t)}read(){const e=new r.BinaryReader(this.data);this.vertexes=[];for(let t=0;t<this.header.lumpLength;t+=3*r.FLOAT_SIZE)this.vertexes.push(a.vec3.fromValues(e.readFloat(),e.readFloat(),e.readFloat()));this.initialized=!0}toString(){let e=super.toString();return e+=`\n${n.LumpType[this.lumpType]}: [(${this.vertexes.join("), (")}]`}}},{"../Utils/BinaryReader":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Utils\\BinaryReader.js","./Lump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\Lump.js","./LumpType":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LumpType.js","gl-matrix":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\node_modules\\gl-matrix\\dist\\gl-matrix.js"}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\VisibilityLump.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e("./Lump"),r=e("../Utils/BinaryReader"),n=e("./LumpType");s.VisibilityLump=class extends i.Lump{constructor(e,t){super(n.LumpType.Visibility,e,t)}read(){if(0===this.header.lumpLength)return console.log("Visibility lump empty"),void(this.initialized=!0);const e=new r.BinaryReader(this.data);this.numClusters=e.readInt32(),this.byteOffsets=new Array(this.numClusters);for(let t=0;t<this.numClusters;t++)this.byteOffsets[t]=[],this.byteOffsets[t].push(e.readInt32()),this.byteOffsets[t].push(e.readInt32());this.initialized=!0}decompressPVS(e){if(!e||-1===e)return Array(this.numClusters).fill(1);if(0===this.header.lumpLength)return[];const t=this.byteOffsets[e][0],s=new r.BinaryReader(this.data,t),i=Array(this.numClusters).fill(0);for(let e=0;e<this.numClusters;){const t=s.readInt8();if(0===t)e+=8*s.readInt8();else for(let s=1;s<=8;s*=2)t&s&&(i[e]=1),e++}return i}toString(){if(!this.initialized)return`\n${n.LumpType[this.lumpType]}: UNINITIALIZED`;let e=super.toString();return e+=`\n${n.LumpType[this.lumpType]}:\n\t\tNum Clusters: ${this.numClusters}\n\t\tbyteOffsets: [${this.byteOffsets.join(", ")}]`}}},{"../Utils/BinaryReader":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Utils\\BinaryReader.js","./Lump":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\Lump.js","./LumpType":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LumpType.js"}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Structs\\Brush.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e("./Enums");s.Brush=class{constructor(e,t,s){this.firstSide=e,this.numSides=t,this.contents=s}toString(){return`FirstSide: ${this.firstSide}\n\t\tNumSides: ${this.numSides}\n\t\tContents: ${i.BrushContent[this.contents]}`}}},{"./Enums":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Structs\\Enums.js"}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Structs\\BrushSide.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});s.BrushSide=class{constructor(e,t,s,i){this.planeNum=e,this.texInfo=t,this.dispInfo=s,this.bevel=i}toString(){return`PlaneNum: ${this.planeNum}\n\t\ttexInfo: ${this.texInfo}\n\t\tdispInfo: ${this.dispInfo}\n\t\tbevel: ${this.bevel}`}}},{}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Structs\\ColorRGBExp32.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});s.ColorRGBExp32=class{constructor(e,t,s,i){this.r=e,this.g=t,this.b=s,this.e=i}toString(){return`RGBE: [${this.r}, ${this.g}, ${this.b}] ${this.e}`}}},{}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Structs\\CompressedLightCube.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});s.CompressedLightCube=class{constructor(e){this.color=e}toString(){return`Color:\n\t${this.color.join("\n\t")}`}}},{}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Structs\\Cubemap.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});s.Cubemap=class{constructor(e,t){this.origin=e,this.size=t}toString(){return`Origin: [${this.origin}]\n\t\tSize: ${this.size}`}}},{}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Structs\\DispCornerNeighbor.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});s.DispCornerNeighbors=class{constructor(e,t){this.neighbors=e,this.nNeighbors=t}toString(){return`neighbors: [${this.neighbors[0]},\n\t\t${this.neighbors[1]}, \n\t\t${this.neighbors[2]}, \n\t\t${this.neighbors[3]}]\n\t\tnumNeighbors: ${this.nNeighbors}\n\t`}}},{}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Structs\\DispInfo.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});s.DispInfo=class{constructor(e,t,s,i,r,n,a,o,u,l,c,d,m){this.startPosition=e,this.dispVertStart=t,this.dispTriStart=s,this.power=i,this.minTess=r,this.smoothingAngle=n,this.contents=a,this.mapFace=o,this.lightmapAlphaStart=u,this.lightmapSamplePositionStart=l,this.edgeNeighbors=c,this.cornerNeighbors=d,this.allowedVerts=m}numVerts(){return(1+(1<<this.power))*(1+(1<<this.power))}numTris(){return(1<<this.power)*(1<<this.power)*2}numRows(){return Math.pow(2,this.power)+1}toString(){return`StartPos: ${this.startPosition}\n\t\tDispVertStart: ${this.dispVertStart}\n\t\tDispTriStart: ${this.dispTriStart}\n\t\tPower: ${this.power}\n\t\tMin Tess: ${this.minTess}\n\t\tSmoothing Angle: ${this.smoothingAngle}\n\t\tContents: ${this.contents}\n\t\tMap Face: ${this.mapFace}\n\t\tLightmapAlphaStart: ${this.lightmapAlphaStart}\n\t\tLightmapSamplePositionStart: ${this.lightmapSamplePositionStart}\n\t\tCornerNeighbors: \n\t\t\t${[this.cornerNeighbors.join("\n\t\t\t")]}\n\t\tEdgeNeighbors: \n\t\t\t${[this.edgeNeighbors.join("\n\t\t\t")]}\n\t\tAllowedVerts: ${this.allowedVerts}\n\t\t`}}},{}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Structs\\DispNeighbor.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});s.DispNeighbor=class{constructor(e){this.subNeighbors=e}toString(){return`[\n\t${this.subNeighbors[0]}, \n\t${this.subNeighbors[1]}\n\t]`}}},{}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Structs\\DispSubNeighbor.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});s.DispSubNeighbor=class{constructor(e,t,s,i){this.iNeighbor=e,this.neighborOrientation=t,this.span=s,this.neighborSpan=i}toString(){return`iNeighbor: ${this.iNeighbor}\n\tneighborOrientation: ${this.neighborOrientation}\n\tspan: ${this.span}\n\tneighborSpan: ${this.neighborSpan}\n\t\t`}}},{}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Structs\\DispVert.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});s.DispVert=class{constructor(e,t,s){this.vec=e,this.dist=t,this.alpha=s}toString(){return`vec: ${this.vec}\ndist: ${this.dist}\nalpha: ${this.alpha}\n\t\t`}}},{}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Structs\\Edge.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});class i{constructor(e,t){this.vertexIndices=[e,t]}reverse(){return new i(this.vertexIndices[1],this.vertexIndices[0])}getVertIndices(e=!1){if(e){this.reverse();return this.reverse().vertexIndices}return this.vertexIndices}toString(){return`[${this.vertexIndices[0]}, ${this.vertexIndices[1]}]`}}s.Edge=i},{}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Structs\\Enums.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),function(e){e[e.EMPTY=0]="EMPTY",e[e.SOLID=1]="SOLID",e[e.WINDOW=2]="WINDOW",e[e.AUX=4]="AUX",e[e.GRATE=8]="GRATE",e[e.SLIME=16]="SLIME",e[e.WATER=32]="WATER",e[e.MIST=64]="MIST",e[e.OPAQUE=128]="OPAQUE",e[e.TEST_FOG_VOLUME=256]="TEST_FOG_VOLUME",e[e.UNUSED=512]="UNUSED",e[e.UNUSED6=1024]="UNUSED6",e[e.TEAM1=2048]="TEAM1",e[e.TEAM2=4096]="TEAM2",e[e.IGNORE_DRAW_OPAQUE=8192]="IGNORE_DRAW_OPAQUE",e[e.MOVEABLE=16384]="MOVEABLE",e[e.AREAPORTAL=32768]="AREAPORTAL",e[e.PLAYERCLIP=65536]="PLAYERCLIP",e[e.MONSTERCLIP=131072]="MONSTERCLIP",e[e.CURRENT_0=262144]="CURRENT_0",e[e.CURRENT_90=524288]="CURRENT_90",e[e.CURRENT_180=1048576]="CURRENT_180",e[e.CURRENT_270=2097152]="CURRENT_270",e[e.CURRENT_UP=4194304]="CURRENT_UP",e[e.CURRENT_DOWN=8388608]="CURRENT_DOWN",e[e.ORIGIN=16777216]="ORIGIN",e[e.MONSTER=33554432]="MONSTER",e[e.DEBRIS=67108864]="DEBRIS",e[e.DETAIL=134217728]="DETAIL",e[e.TRANSLUCENT=268435456]="TRANSLUCENT",e[e.LADDER=536870912]="LADDER",e[e.HITBOX=1073741824]="HITBOX"}(s.BrushContent||(s.BrushContent={})),function(e){e[e.LIGHT=1]="LIGHT",e[e.SKY2D=2]="SKY2D",e[e.SKY=4]="SKY",e[e.WARP=8]="WARP",e[e.TRANS=16]="TRANS",e[e.NO_PORTAL=32]="NO_PORTAL",e[e.TRIGGER=64]="TRIGGER",e[e.NODRAW=128]="NODRAW",e[e.HINT=256]="HINT",e[e.SKIP=512]="SKIP",e[e.NO_LIGHT=1024]="NO_LIGHT",e[e.BUMP_LIGHT=2048]="BUMP_LIGHT",e[e.NO_SHADOWS=4096]="NO_SHADOWS",e[e.NO_DECALS=8192]="NO_DECALS",e[e.NO_CHOP=16384]="NO_CHOP",e[e.HITBOX=32768]="HITBOX"}(s.SurfFlags||(s.SurfFlags={})),function(e){e[e.CHILDNODE_UPPER_RIGHT=0]="CHILDNODE_UPPER_RIGHT",e[e.CHILDNODE_UPPER_LEFT=1]="CHILDNODE_UPPER_LEFT",e[e.CHILDNODE_LOWER_LEFT=2]="CHILDNODE_LOWER_LEFT",e[e.CHILDNODE_LOWER_RIGHT=3]="CHILDNODE_LOWER_RIGHT"}(s.DispChildNode||(s.DispChildNode={})),function(e){e[e.CORNER_LOWER_LEFT=0]="CORNER_LOWER_LEFT",e[e.CORNER_UPPER_LEFT=1]="CORNER_UPPER_LEFT",e[e.CORNER_UPPER_RIGHT=3]="CORNER_UPPER_RIGHT",e[e.CORNER_LOWER_RIGHT=2]="CORNER_LOWER_RIGHT"}(s.DispCorner||(s.DispCorner={})),function(e){e[e.NEIGHBOREDGE_LEFT=0]="NEIGHBOREDGE_LEFT",e[e.NEIGHBOREDGE_TOP=1]="NEIGHBOREDGE_TOP",e[e.NEIGHBOREDGE_RIGHT=2]="NEIGHBOREDGE_RIGHT",e[e.NEIGHBOREDGE_BOTTOM=3]="NEIGHBOREDGE_BOTTOM"}(s.DispNeighborEdge||(s.DispNeighborEdge={})),function(e){e[e.CORNER_TO_CORNER=0]="CORNER_TO_CORNER",e[e.CORNER_TO_MIDPOINT=1]="CORNER_TO_MIDPOINT",e[e.MIDPOINT_TO_CORNER=2]="MIDPOINT_TO_CORNER"}(s.DispSpan||(s.DispSpan={})),function(e){e[e.ORIENTATION_CCW_0=0]="ORIENTATION_CCW_0",e[e.ORIENTATION_CCW_90=1]="ORIENTATION_CCW_90",e[e.ORIENTATION_CCW_180=2]="ORIENTATION_CCW_180",e[e.ORIENTATION_CCW_270=3]="ORIENTATION_CCW_270"}(s.DispOrientation||(s.DispOrientation={})),function(e){e[e.DISPTRI_TAG_SURFACE=1]="DISPTRI_TAG_SURFACE",e[e.DISPTRI_TAG_WALKABLE=2]="DISPTRI_TAG_WALKABLE",e[e.DISPTRI_TAG_BUILDABLE=4]="DISPTRI_TAG_BUILDABLE",e[e.DISPTRI_FLAG_SURFPROP1=8]="DISPTRI_FLAG_SURFPROP1",e[e.DISPTRI_FLAG_SURFPROP2=16]="DISPTRI_FLAG_SURFPROP2"}(s.DispTags||(s.DispTags={}))},{}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Structs\\Face.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});s.Face=class{constructor(e,t,s,i,r,n,a,o,u,l,c,d,m,p,h,L,S){this.planeNum=e,this.side=t,this.onNode=s,this.firstEdge=i,this.numEdges=r,this.texInfo=n,this.dispInfo=a,this.surfaceFogVolumeID=o,this.style=u,this.lightOfs=l,this.area=c,this.lightmapTextureMinsInLuxels=d,this.lightmapTextureSizeInLuxels=m,this.origFace=p,this.numPrims=h,this.firstPrimID=L,this.smoothingGroups=S}toString(){return`PlaneNum: ${this.planeNum}\n\t\tSide: ${this.side}\n\t\tFirst Edge: ${this.firstEdge}\n\t\tNum Edges: ${this.numEdges}\n\t\tSmoothing Group: ${this.smoothingGroups}\n\t\t`}}},{}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Structs\\GameLumpStruct.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});s.GameLumpStruct=class{constructor(e,t,s,i,r){this.id=e,this.flags=t,this.version=s,this.fileOffset=i,this.fileLength=r}toString(){return`ID: ${this.id}\n\t\tFlags: ${this.flags}\n\t\tVersion: ${this.version}\n\t\tFileOffset: ${this.fileOffset}\n\t\tFileLegnth: ${this.fileLength}\n\t\t`}}},{}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Structs\\Leaf.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});s.Leaf=class{constructor(e,t,s,i,r,n,a,o,u,l,c){this.contents=e,this.cluster=t,this.area=s,this.flags=i,this.mins=r,this.maxs=n,this.firstLeafFace=a,this.numLeafFaces=o,this.firstLeafBrush=u,this.numLeafBrushes=l,this.leafWaterDataID=c}toString(){return`Contents: ${this.contents} \n\t\tCluster: ${this.cluster}\n\t\tArea: ${this.area}\n\t\tFlags: ${this.flags}\n\t\tMins: ${this.mins}\n\t\tMaxs: ${this.maxs}\n\t\tFirstLeafFace: ${this.firstLeafFace}\n\t\tNumLeafFaces: ${this.numLeafFaces}\n\t\tFirstLeafBrush: ${this.firstLeafBrush}\n\t\tNumLeafBrushes: ${this.numLeafBrushes}\n\t\tLeafWaterDataID: ${this.leafWaterDataID}\n\t\t`}}},{}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Structs\\LeafAmbientIndex.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});s.LeafAmbientIndex=class{constructor(e,t){this.ambientSampleCount=e,this.firstAmbientSample=t}toString(){return`AmbientSampleCount: ${this.ambientSampleCount}\nFirstAmbientSample: ${this.firstAmbientSample}`}}},{}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Structs\\LeafAmbientLighting.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});s.LeafAmbientLighting=class{constructor(e,t,s,i,r){this.cube=e,this.x=t,this.y=s,this.z=i,this.pad=r}toString(){return`Cube: \n${this.cube}\nXYZ: [${this.x}, ${this.y}, ${this.z}]`}}},{}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Structs\\Model.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});s.Model=class{constructor(e,t,s,i,r,n){this.mins=e,this.maxs=t,this.origin=s,this.headNode=i,this.firstFace=r,this.numFaces=n}toString(){return`Mins: ${this.mins}\n\t\tMaxs: ${this.maxs} \n\t\tOrigin: ${this.origin} \n\t\tHeadNode: ${this.headNode} \n\t\tFirstFace: ${this.firstFace} \n\t\tNumFaces: ${this.numFaces} \n\t\t`}}},{}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Structs\\Node.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});s.Node=class{constructor(e,t,s,i,r,n,a,o){this.planeNum=e,this.children=t,this.mins=s,this.maxs=i,this.firstFace=r,this.numFaces=n,this.area=a,this.padding=o}toString(){return`Node: \n\t\t\tPlaneNum: ${this.planeNum}\n\t\t\tChildren: ${this.children}\n\t\t\tMins: [${this.mins.join(", ")}]\n\t\t\tMaxs: [${this.maxs.join(", ")}]\n\t\t\tFirstFace: ${this.firstFace}\n\t\t\tNumFaces: ${this.numFaces}\n\t\t\tArea: ${this.area}\n\t\t\t`}}},{}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Structs\\Plane.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});s.Plane=class{constructor(e,t,s){this.normal=e,this.dist=t,this.type=s}toString(){return`Normal: ${this.normal}\n\t\tDistance From Origin: ${this.dist}\n\t\tType: ${this.type}\n\t\t`}}},{}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Structs\\TexData.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});s.TexData=class{constructor(e,t,s,i,r,n){this.reflectivity=e,this.nameDataStringTableID=t,this.width=s,this.height=i,this.viewWidth=r,this.viewHeight=n}toString(){return`Reflectivity: [${this.reflectivity}]\n\t\tNameDataStringTableID: ${this.nameDataStringTableID}\n\t\tWidth: ${this.width}\n\t\tHeight: ${this.height}\n\t\tViewWidth: ${this.viewWidth}\n\t\tViewHeight: ${this.viewHeight}`}}},{}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Structs\\TexInfo.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});s.TexInfo=class{constructor(e,t,s,i){this.textureVecs=e,this.lightmapVecs=t,this.flags=s,this.texData=i}toString(){return`Texture Vecs: [${this.textureVecs.join("], [")}]\n\t\tLightmap Vecs: [${this.lightmapVecs.join("], [")}]\n\t\tFlags: ${this.flags}\n\t\tTexData: ${this.texData}`}}},{}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Utils\\BinaryReader.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.INT_8_SIZE=1,s.INT_16_SIZE=2,s.INT_32_SIZE=4,s.UINT_8_SIZE=1,s.UINT_16_SIZE=2,s.UINT_32_SIZE=4,s.FLOAT_SIZE=4,s.DOUBLE_SIZE=8,s.BOOL_SIZE=1,s.CHAR_SIZE=1;var i,r;s.BinaryReader=class{constructor(e,t=0,s=r.LittleEndian){this.dataView=new DataView(e),s===r.LittleEndian?this.isLittleEndian=!0:this.isLittleEndian=!1,this.position=t,this.length=e.byteLength}readInt8(){if(this.position+s.INT_8_SIZE>this.length)throw new Error("RangeError");const e=this.dataView.getInt8(this.position);return this.position+=s.INT_8_SIZE,e}readInt16(){if(this.position+s.INT_16_SIZE>this.length)throw new Error("RangeError");const e=this.dataView.getInt16(this.position,this.isLittleEndian);return this.position+=s.INT_16_SIZE,e}readInt32(){if(this.position+s.INT_32_SIZE>this.length)throw new Error("RangeError");const e=this.dataView.getInt32(this.position,this.isLittleEndian);return this.position+=s.INT_32_SIZE,e}readUInt8(){if(this.position+s.UINT_8_SIZE>this.length)throw new Error("RangeError");const e=this.dataView.getUint8(this.position);return this.position+=s.UINT_8_SIZE,e}readUInt16(){if(this.position+s.UINT_16_SIZE>this.length)throw new Error("RangeError");const e=this.dataView.getUint16(this.position,this.isLittleEndian);return this.position+=s.UINT_16_SIZE,e}readUInt32(){if(this.position+s.UINT_32_SIZE>this.length)throw new Error("RangeError");const e=this.dataView.getUint16(this.position,this.isLittleEndian);return this.position+=s.UINT_32_SIZE,e}readFloat(){if(this.position+s.FLOAT_SIZE>this.length)throw new Error("RangeError");const e=this.dataView.getFloat32(this.position,this.isLittleEndian);return this.position+=s.FLOAT_SIZE,e}readDouble(){if(this.position+s.DOUBLE_SIZE>this.length)throw new Error("RangeError");const e=this.dataView.getFloat64(this.position,this.isLittleEndian);return this.position+=s.DOUBLE_SIZE,e}readBoolean(){if(this.position+s.BOOL_SIZE>this.length)throw new Error("RangeError");const e=0===this.dataView.getInt8(this.position);return this.position+=s.BOOL_SIZE,e}readBytes(e){if(this.position+e>this.length)throw new Error("RangeError");const t=new Uint8Array(this.dataView.buffer,this.position,e);return this.position+=e,t}readChar(){if(this.position+s.CHAR_SIZE>this.length)throw new Error("RangeError");const e=String.fromCharCode(this.dataView.getInt8(this.position));return this.position+=s.CHAR_SIZE,e}peekChar(){if(this.position+s.CHAR_SIZE>this.length)throw new Error("RangeError");return String.fromCharCode(this.dataView.getInt8(this.position))}readString(e=!0){if(this.position+s.CHAR_SIZE>this.length){if(e)throw new Error("RangeError");return null}let t="",i=this.readChar();for(;"\0"!==i&&this.position+s.CHAR_SIZE<=this.length;)t+=i,i=this.readChar();return t}seek(e,t){switch(t){case i.Beginning:if(e>this.length)throw new Error("RangeError");this.position=e;break;case i.Current:if(this.position+e>this.length)throw new Error("RangeError");this.position+=e;break;case i.End:if(this.length+e>this.length)throw new Error("RangeError");this.position=this.length+e}}},function(e){e[e.Current=0]="Current",e[e.Beginning=1]="Beginning",e[e.End=2]="End"}(i=s.SeekOrigin||(s.SeekOrigin={})),function(e){e[e.LittleEndian=0]="LittleEndian",e[e.BigEndian=1]="BigEndian"}(r=s.Endianness||(s.Endianness={}))},{}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\KeyboardListener.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e("./Rendering/Camera/ICamera"),r=e("./Rendering/Messaging/Message"),n=e("./Utils/KeyPress");s.KeyboardListener=class{constructor(e){this.componentName="KeyboardListener",this.listen=!0,this.zToggle=!1,this.wPressed=!1,this.aPressed=!1,this.sPressed=!1,this.dPressed=!1,window.addEventListener("keydown",t=>{switch(t.key){case"W":case"w":this.wPressed=!0;break;case"A":case"a":this.aPressed=!0;break;case"S":case"s":this.sPressed=!0;break;case"D":case"d":this.dPressed=!0;break;case"Z":case"z":this.zToggle=!this.zToggle,e.messageQueue.add(new r.Message(e,this,r.MessageType.Keypress,new n.KeyPress(n.Key.Z),r.MessagePriority.High)),e.messageQueue.add(new r.Message(e,this,r.MessageType.ToggleRender,this.zToggle));break;case"Shift":e.messageQueue.add(new r.Message(e,this,r.MessageType.Keypress,new n.KeyPress(null,n.KeyState.Keydown,n.KeyModifier.Shift),r.MessagePriority.High))}}),window.addEventListener("keyup",t=>{switch(t.key){case"W":case"w":this.wPressed=!1;break;case"A":case"a":this.aPressed=!1;break;case"S":case"s":this.sPressed=!1;break;case"D":case"d":this.dPressed=!1;break;case"Shift":e.messageQueue.add(new r.Message(e,this,r.MessageType.Keypress,new n.KeyPress(null,n.KeyState.Keyup,n.KeyModifier.Shift),r.MessagePriority.High))}})}pollKeyboard(e){this.wPressed&&this.zToggle&&e.messageQueue.add(new r.Message(e,this,r.MessageType.MoveCamera,i.MoveDirection.forward)),this.sPressed&&this.zToggle&&e.messageQueue.add(new r.Message(e,this,r.MessageType.MoveCamera,i.MoveDirection.backward)),this.dPressed&&this.zToggle&&e.messageQueue.add(new r.Message(e,this,r.MessageType.MoveCamera,i.MoveDirection.right)),this.aPressed&&this.zToggle&&e.messageQueue.add(new r.Message(e,this,r.MessageType.MoveCamera,i.MoveDirection.left))}onMessage(e){}}},{"./Rendering/Camera/ICamera":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\Camera\\ICamera.js","./Rendering/Messaging/Message":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\Messaging\\Message.js","./Utils/KeyPress":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Utils\\KeyPress.js"}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\MouseHandler.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e("./Rendering/Messaging/Message"),r=e("gl-matrix");s.MouseHandler=class{constructor(e){this.componentName="MouseHandler",this._active=!1,document.addEventListener("mousemove",this.mouseCallback.bind(this,e)),document.addEventListener("pointerlockchange",this.pointerLockChanged.bind(this,e)),document.addEventListener("pointerlockerror",()=>console.log("Pointer lock failed"))}set active(e){const t=document.getElementById("canvas");t?(e?t.requestPointerLock():document.exitPointerLock(),this._active=e):console.log("Failed to find canvas element")}get active(){return this._active}mouseCallback(e,t){this.active&&e.messageQueue.add(new i.Message(e,this,i.MessageType.MouseMove,r.vec2.fromValues(t.movementX,t.movementY),i.MessagePriority.High))}pointerLockChanged(e,t){document.pointerLockElement!==document.getElementById("canvas")&&e.messageQueue.add(new i.Message(e,this,i.MessageType.ToggleCameraActive,!1))}onMessage(e){switch(e.type){case i.MessageType.ToggleCameraActive:this.active=e.data}}}},{"./Rendering/Messaging/Message":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\Messaging\\Message.js","gl-matrix":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\node_modules\\gl-matrix\\dist\\gl-matrix.js"}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\Camera\\CameraState.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});s.CameraState=class{constructor(e,t,s,i){this.position=e,this.modelMatrix=t,this.projectionMatrix=s,this.viewMatrix=i}}},{}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\Camera\\ICamera.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),function(e){e[e.forward=0]="forward",e[e.backward=1]="backward",e[e.left=2]="left",e[e.right=3]="right"}(s.MoveDirection||(s.MoveDirection={}))},{}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\Camera\\PerspectiveCamera.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e("gl-matrix"),r=e("../../Utils/WrapAngle"),n=e("../../Utils/LimitAngle"),a=e("./ICamera"),o=e("../Messaging/Message"),u=e("./CameraState");s.PerspectiveCamera=class{constructor(e,t){this.componentName="PerspectiveCamera",this.horizontalFov=45,this.speed=10,this.mulitplier=1,this.mouseSensitivity=5,this.up=i.vec3.fromValues(0,1,0),this.modelMatrix=i.mat4.identity(i.mat4.create()),this.nearClip=1,this.farClip=1e4,console.log("--Initializing Perspective Camera--"),console.log("\tCanvas Width: "+e),console.log("\tCanvas Height: "+t),0===t?(console.log("Error, height cannot be 0"),this.aspectRatio=0):this.aspectRatio=e/t,console.log("\tAspect Ratio: "+this.aspectRatio),this.position=i.vec3.fromValues(0,0,0),this.horizontalAngle=0,this.verticalAngle=0,i.mat4.rotateX(this.modelMatrix,this.modelMatrix,i.glMatrix.toRadian(-90)),this.getProjectionMatrix()}get horizontalAngle(){return this._horizontalAngle}set horizontalAngle(e){this._horizontalAngle=r.wrapAngle(e)}get verticalAngle(){return this._verticalAngle}set verticalAngle(e){this._verticalAngle=n.limitAngle(e,-89,89)}getFront(){const e=i.vec3.create();return e[0]=Math.cos(i.glMatrix.toRadian(this.verticalAngle))*Math.cos(i.glMatrix.toRadian(this.horizontalAngle)),e[1]=Math.sin(i.glMatrix.toRadian(this.verticalAngle)),e[2]=Math.cos(i.glMatrix.toRadian(this.verticalAngle))*Math.sin(i.glMatrix.toRadian(this.horizontalAngle)),i.vec3.normalize(e,e),e}getRight(){const e=this.getFront(),t=i.vec3.create();return i.vec3.cross(t,e,this.up),i.vec3.normalize(t,t),t}getProjectionMatrix(){const e=i.mat4.create();return i.mat4.perspective(e,i.glMatrix.toRadian(this.horizontalFov),this.aspectRatio,this.nearClip,this.farClip),e}getViewMatrix(){const e=i.vec3.create();i.vec3.add(e,this.position,this.getFront());const t=i.mat4.create();return i.mat4.lookAt(t,this.position,e,this.up),t}getModelMatrix(){return this.modelMatrix}updateAspectRatio(e,t){0!==t?this.aspectRatio=e/t:console.log("Error, height cannot be 0")}move(e){switch(e){case a.MoveDirection.forward:this.moveForward();break;case a.MoveDirection.backward:this.moveBackword();break;case a.MoveDirection.left:this.moveLeft();break;case a.MoveDirection.right:this.moveRight()}}moveForward(){const e=this.getFront();this.position[0]+=this.speed*this.mulitplier*e[0],this.position[1]+=this.speed*this.mulitplier*e[1],this.position[2]+=this.speed*this.mulitplier*e[2]}moveBackword(){const e=this.getFront();this.position[0]-=this.speed*this.mulitplier*e[0],this.position[1]-=this.speed*this.mulitplier*e[1],this.position[2]-=this.speed*this.mulitplier*e[2]}moveRight(){const e=this.getRight();this.position[0]+=this.speed*this.mulitplier*e[0],this.position[1]+=this.speed*this.mulitplier*e[1],this.position[2]+=this.speed*this.mulitplier*e[2]}moveLeft(){const e=this.getRight();this.position[0]-=this.speed*this.mulitplier*e[0],this.position[1]-=this.speed*this.mulitplier*e[1],this.position[2]-=this.speed*this.mulitplier*e[2]}update(e,t,s){this.horizontalAngle+=e*s*this.mouseSensitivity,this.verticalAngle+=-t*s*this.mouseSensitivity}getCameraState(){return new u.CameraState(this.position,this.getModelMatrix(),this.getProjectionMatrix(),this.getViewMatrix())}onMessage(e){switch(e.type){case o.MessageType.MoveCamera:this.move(e.data);break;case o.MessageType.MouseMove:const t=e.data;this.update(t[0],t[1],t[2])}}}},{"../../Utils/LimitAngle":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Utils\\LimitAngle.js","../../Utils/WrapAngle":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Utils\\WrapAngle.js","../Messaging/Message":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\Messaging\\Message.js","./CameraState":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\Camera\\CameraState.js","./ICamera":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\Camera\\ICamera.js","gl-matrix":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\node_modules\\gl-matrix\\dist\\gl-matrix.js"}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\EngineCore.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e("../KeyboardListener"),r=e("../MouseHandler"),n=e("./Camera/PerspectiveCamera"),a=e("gl-matrix"),o=e("./Messaging/MessageQueue"),u=e("./Messaging/Message"),l=e("../Utils/KeyPress");class c{constructor(e){this.componentName="CoreEngine",this.controlsActive=!1,this.gridSize=15,this.drawGrid=!0,this.renderObjects=[],this.previousTime=0,this.deltaTime=0,this.renderFrame=!1,this.numFrames=0,this.timeBase=0,this.timePassed=0,console.log("--Initializing Core--"),this.gl=e,this.messageQueue=new o.MessageQueue,this.gl.clearColor(0,0,0,1),this.gl.clearDepth(1),this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(this.gl.FRONT),this.gl.enable(this.gl.DEPTH_TEST),this.gl.depthFunc(this.gl.LEQUAL),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.cameras=[new n.PerspectiveCamera(this.gl.canvas.clientWidth,this.gl.canvas.clientHeight)],this.activeCamera=this.cameras[0],this.keyboardListener=new i.KeyboardListener(this),this.mouseHandler=new r.MouseHandler(this),c.renderer=this}static get renderer(){return c._renderer}static set renderer(e){c._renderer=e}addRenderableObject(e){this.renderObjects.push(e)}clearRenderObjects(){this.renderObjects=[]}main(e=0){window.requestAnimationFrame(this.main.bind(this)),this.keyboardListener.pollKeyboard(this),this.messageQueue.dispatch(),this.deltaTime=(e-this.previousTime)/1e3,this.previousTime=e,this.numFrames++,this.renderFrame&&this.render(),this.computeFPS(e)}computeFPS(e){this.timePassed+=this.deltaTime,this.timePassed-this.timeBase>.25&&this.numFrames>10&&(window.dispatchEvent(new CustomEvent("fpsUpdate",{detail:(this.numFrames/(this.timePassed-this.timeBase)).toFixed(2)})),this.timeBase=this.timePassed,this.numFrames=0)}render(){this.resize(),this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT);const e=this.activeCamera.getCameraState();window.dispatchEvent(new CustomEvent("camUpdate",{detail:e})),this.renderObjects.forEach(t=>{t.draw(this.gl,e)})}resize(){const e=window.devicePixelRatio||1,t=Math.floor(this.gl.canvas.clientWidth*e),s=Math.floor(this.gl.canvas.clientHeight*e);this.gl.canvas.width===t&&this.gl.canvas.height===s||(this.gl.canvas.width=t,this.gl.canvas.height=s,this.activeCamera.updateAspectRatio(t,s))}onMessage(e){switch(e.type){case u.MessageType.ToggleCameraActive:this.controlsActive=e.data,this.mouseHandler.active=e.data,this.keyboardListener.zToggle=e.data,this.renderFrame=e.data;break;case u.MessageType.ToggleRender:this.renderFrame=e.data;break;case u.MessageType.MoveCamera:this.activeCamera.onMessage(e);break;case u.MessageType.MouseMove:this.activeCamera.onMessage(new u.Message(this.activeCamera,this,u.MessageType.MouseMove,a.vec3.fromValues(e.data[0],e.data[1],this.deltaTime)));break;case u.MessageType.Keypress:switch(e.data.key){case l.Key.Z:this.controlsActive=!this.controlsActive,this.renderFrame=!this.renderFrame,this.mouseHandler.active=this.controlsActive;break;case l.Key.Escape:this.controlsActive=!1,this.renderFrame=!1,this.mouseHandler.active=!1;default:switch(e.data.modifier){case l.KeyModifier.Shift:e.data.state===l.KeyState.Keydown?this.activeCamera.mulitplier=5:this.activeCamera.mulitplier=1}}}}}s.EngineCore=c},{"../KeyboardListener":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\KeyboardListener.js","../MouseHandler":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\MouseHandler.js","../Utils/KeyPress":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Utils\\KeyPress.js","./Camera/PerspectiveCamera":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\Camera\\PerspectiveCamera.js","./Messaging/Message":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\Messaging\\Message.js","./Messaging/MessageQueue":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\Messaging\\MessageQueue.js","gl-matrix":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\node_modules\\gl-matrix\\dist\\gl-matrix.js"}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\Messaging\\Message.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i,r;s.Message=class{constructor(e,t,s,r,n=i.Low){e instanceof Array?this.to=e:this.to=[e],this.from=t,this.type=s,this.data=r,this.priority=n}toString(){let e="";return this.to.forEach(t=>{e+=`${this.from.componentName} -> ${t.componentName} - ${i[this.priority]}:\n`,e+=`${this.data} (${r[this.type]})\n`}),e}},function(e){e[e.High=0]="High",e[e.Medium=1]="Medium",e[e.Low=2]="Low"}(i=s.MessagePriority||(s.MessagePriority={})),function(e){e[e.ToggleCameraActive=0]="ToggleCameraActive",e[e.Keypress=1]="Keypress",e[e.ToggleRender=2]="ToggleRender",e[e.MoveCamera=3]="MoveCamera",e[e.MouseMove=4]="MouseMove"}(r=s.MessageType||(s.MessageType={}))},{}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\Messaging\\MessageQueue.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e("./Message");s.MessageQueue=class{constructor(e=!1){this.lowPriorityMessages=[],this.mediumPriorityMessages=[],this.logging=e}add(e){switch(e.priority){case i.MessagePriority.High:this.dispatchMessage(e);break;case i.MessagePriority.Medium:this.mediumPriorityMessages.push(e);case i.MessagePriority.Low:this.lowPriorityMessages.push(e)}}dispatch(){for(let e=0;e<this.mediumPriorityMessages.length;e++){const e=this.mediumPriorityMessages.shift();this.dispatchMessage(e)}for(let e=0;e<this.lowPriorityMessages.length;e++){const e=this.lowPriorityMessages.shift();this.dispatchMessage(e)}}dispatchMessage(e){if(e){this.logging&&console.log(e.toString());const t=e.to;t&&t.forEach(t=>{t.onMessage(e)})}}}},{"./Message":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\Messaging\\Message.js"}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\RenderObjects\\BSPResourceManager.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e("../Shaders/UniformLocations"),r=e("../Textures/TextureDictionary");s.BSPResourceManager=class{constructor(e,t){this.shaderPrograms=[],this.gl=e,this.textureDictionary=new r.TextureDictionary(this.gl),this.bsp=t}getGLContext(){return this.gl}setGLContext(e){this.gl=e}getTextureDictionary(){return this.textureDictionary}getBSP(){return this.bsp}createShaderProgram(){const e=this.gl.createProgram();if(null===e)throw new Error("Failed to create shader program");return this.shaderPrograms.push(e),this.shaderPrograms.length-1}getUniformLocations(e){return new i.UniformLocations(this.gl,this.shaderPrograms[e])}getShaderProgram(e){return this.shaderPrograms[e]}addShaders(e,t){if(t.forEach(t=>{const s=t.compileShader(this.gl);s&&this.gl.attachShader(this.shaderPrograms[e],s)}),this.gl.linkProgram(this.shaderPrograms[e]),!this.gl.getProgramParameter(this.shaderPrograms[e],this.gl.LINK_STATUS))return console.log("Unable to initialize shader program: "+this.gl.getProgramInfoLog(this.shaderPrograms[e])),null}}},{"../Shaders/UniformLocations":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\Shaders\\UniformLocations.js","../Textures/TextureDictionary":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\Textures\\TextureDictionary.js"}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\RenderObjects\\BSP\\BSPFace.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e("../../../Structs/Vertex"),r=e("../../../BSP/Lumps/LumpType"),n=e("gl-matrix"),a=e("../../../Utils/AddRange"),o=e("../../../BSP/Structs/Enums"),u=e("../IRenderable"),l=e("../../Textures/Texture");class c{constructor(e,t,s){this.visibility=u.Visibility.Visible,this.indices=[],this.face=e,this.vertices=this.getVertices(t,s)}calcIndices(e){null!=this.dispInfo?this.calcDispIndices(e):this.calcFaceIndices(e)}calcFaceIndices(e){for(let t=1;t<this.vertices.length-1;t++)a.addRange(this.indices,[e,e+t,e+t+1])}calcDispIndices(e){if(null==this.dispInfo)return console.log("Disp info was null!"),console.log(this),[];const t=this.dispInfo.numRows();for(let s=0;s<t-1;s++){const i=s*t;for(let r=0;r<Math.pow(2,this.dispInfo.power-1);r++){const n=i+2*r;s%2==0?(this.indices.push(n+e),this.indices.push(n+t+e),this.indices.push(n+t+1+e),this.indices.push(n+e),this.indices.push(n+t+1+e),this.indices.push(n+1+e),this.indices.push(n+1+e),this.indices.push(n+t+1+e),this.indices.push(n+2+e),this.indices.push(n+2+e),this.indices.push(n+t+1+e),this.indices.push(n+t+2+e)):(this.indices.push(n+1+e),this.indices.push(n+e),this.indices.push(n+t+e),this.indices.push(n+1+e),this.indices.push(n+t+e),this.indices.push(n+t+1+e),this.indices.push(n+1+e),this.indices.push(n+t+1+e),this.indices.push(n+t+2+e),this.indices.push(n+1+e),this.indices.push(n+t+2+e),this.indices.push(n+2+e))}}}getMesh(){return c.verticesToMesh(this.vertices)}getVertices(e,t){const s=e.readLump(r.LumpType.TexInfo),i=e.readLump(r.LumpType.TexData),a=e.readLump(r.LumpType.TexDataStringTable),c=e.readLump(r.LumpType.TexDataStringData),d=s.texInfos[this.face.texInfo],m=i.texDatas[d.texData],p=a.texDataTable[m.nameDataStringTableID],h=c.readStringAtOffset(p);let L;if((d.flags&o.SurfFlags.TRANS)===o.SurfFlags.TRANS&&(this.visibility=u.Visibility.Hidden),(d.flags&o.SurfFlags.TRIGGER)===o.SurfFlags.TRIGGER&&(this.visibility=u.Visibility.Hidden),(d.flags&o.SurfFlags.SKY)!==o.SurfFlags.SKY&&(d.flags&o.SurfFlags.SKY2D)!==o.SurfFlags.SKY2D||(this.visibility=u.Visibility.Hidden),(d.flags&o.SurfFlags.SKIP)!==o.SurfFlags.SKIP&&(d.flags&o.SurfFlags.HINT)!==o.SurfFlags.HINT||(this.visibility=u.Visibility.Hidden),(d.flags&o.SurfFlags.HITBOX)===o.SurfFlags.HITBOX&&(this.visibility=u.Visibility.Hidden),-1===d.texData)L=n.vec4.fromValues(0,1,1,1);else{const e=m.reflectivity;L=n.vec4.fromValues(e[0],e[1],e[2],1)}if(null!=h){const e=t.getGLContext(),s=t.getTextureDictionary();if(this.texture=new l.Texture(e,L,0,h),null!=this.texture){const t=s.addTexture(e,this.texture);this.texture.id=t}}else console.log("Failed to read texture name");return-1===this.face.dispInfo?this.getFaceVertexes(e):(console.log("disp"),this.getDispVertexes(e))}getDispVertexes(e){const t=e.readLump(r.LumpType.DispVerts),s=e.readLump(r.LumpType.DispInfo);this.dispInfo=s.dispInfos[this.face.dispInfo];const o=this.dispInfo.numRows();let u=this.getFaceVertexes(e);for(let e=0;e<u.length;e++){const t=u[e];if(n.vec3.equals(n.vec3.round(n.vec3.create(),t.position),n.vec3.round(n.vec3.create(),this.dispInfo.startPosition))){const t=u.slice(e),s=u.slice(0,e);a.addRange(t,s),u=t;break}}if(4!==u.length)return console.log("Invalid displacement"),[];const l=[],c=[],d=[],m=u[0],p=u[1],h=u[2],L=u[3];for(let e=0;e<o;e++){const t=n.vec3.create();n.vec3.lerp(t,m.position,p.position,e/(o-1)),c.push(new i.Vertex(t,m.normal))}for(let e=0;e<o;e++){const t=n.vec3.create();n.vec3.lerp(t,L.position,h.position,e/(o-1)),d.push(new i.Vertex(t,m.normal))}for(let e=0;e<c.length;e++){const t=c[e],s=d[e];for(let e=0;e<o;e++){const r=n.vec3.create();n.vec3.lerp(r,t.position,s.position,e/(o-1)),null!=this.texture?l.push(new i.Vertex(r,m.normal,this.texture.placeholderColor,i.FALSE,n.vec2.fromValues(0,0),this.texture.id)):l.push(new i.Vertex(r,m.normal))}}for(let e=0;e<this.dispInfo.numVerts();e++){const s=t.dispVerts[e+this.dispInfo.dispVertStart];n.vec3.scaleAndAdd(l[e].position,l[e].position,s.vec,s.dist)}return l}getFaceVertexes(e,t=!0){const s=e.readLump(r.LumpType.Planes).planes[this.face.planeNum].normal,a=e.readLump(r.LumpType.Vertexes),o=[];for(let t=this.face.firstEdge;t<this.face.firstEdge+this.face.numEdges;t++){const s=e.readLump(r.LumpType.SurfEdges).surfEdges[t],i=s<0,n=e.readLump(r.LumpType.Edges).edges[Math.abs(s)].getVertIndices(i);o.push(a.vertexes[n[0]]),o.push(a.vertexes[n[1]])}let u=[];return u=t?Array.from(new Set(o)).map(e=>null!=this.texture?new i.Vertex(e,s,this.texture.placeholderColor,i.FALSE,n.vec2.fromValues(0,0),this.texture.id):new i.Vertex(e,s)):o.map(e=>new i.Vertex(e,s))}static verticesToMesh(e){const t=[];return e.forEach(e=>{a.addRange(t,e.position),a.addRange(t,e.normal),a.addRange(t,e.fallbackColor),t.push(e.textureLoaded),a.addRange(t,e.texCoord),t.push(e.texIndex)}),t}}s.BSPFace=c},{"../../../BSP/Lumps/LumpType":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LumpType.js","../../../BSP/Structs/Enums":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Structs\\Enums.js","../../../Structs/Vertex":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Structs\\Vertex.js","../../../Utils/AddRange":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Utils\\AddRange.js","../../Textures/Texture":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\Textures\\Texture.js","../IRenderable":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\RenderObjects\\IRenderable.js","gl-matrix":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\node_modules\\gl-matrix\\dist\\gl-matrix.js"}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\RenderObjects\\BSP\\BSPMesh.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e("../IRenderable"),r=e("../../../BSP/Lumps/LumpType"),n=e("../BSPResourceManager"),a=e("./BSPModel");s.BSPMesh=class{constructor(e,t){this.visibility=i.Visibility.Visible,this.initialized=!1,this.renderMode=WebGL2RenderingContext.TRIANGLES,this.models=[],this.resourceManager=new n.BSPResourceManager(e,t),this.visLump=this.resourceManager.getBSP().readLump(r.LumpType.Visibility),t.readLump(r.LumpType.Models).models.forEach(t=>{this.models.push(new a.BSPModel(e,this.resourceManager,t))}),this.initialized=!0,console.log("BSP Loaded")}draw(e,t,s){if(!this.initialized)return void console.log("Cannot render object, not initialized");if(this.visibility===i.Visibility.Hidden)return;const r=this.getCurrentCluster(t),n=this.visLump.decompressPVS(r);window.dispatchEvent(new CustomEvent("clusterUpdate",{detail:r})),this.models.forEach(i=>{i.draw(e,t,n,s)})}getCurrentCluster(e){let t=null;return this.models.forEach(s=>{const i=s.getCurrentCluster(e);i&&(t=i)}),t}getUniformLocations(){}getClusters(e,t){let s=[];return this.models.forEach(i=>s=s.concat(i.getClusters(e,t))),s}}},{"../../../BSP/Lumps/LumpType":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LumpType.js","../BSPResourceManager":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\RenderObjects\\BSPResourceManager.js","../IRenderable":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\RenderObjects\\IRenderable.js","./BSPModel":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\RenderObjects\\BSP\\BSPModel.js"}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\RenderObjects\\BSP\\BSPModel.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e("../IRenderable"),r=e("../../../BSP/Lumps/LumpType"),n=e("./Tree.ts/BSPNode"),a=e("gl-matrix");s.BSPModel=class{constructor(e,t,s){if(this.visibility=i.Visibility.Visible,this.resourceManager=t,this.model=s,0===s.numFaces)return console.log("Empty Node"),void(this.visibility=i.Visibility.Hidden);this.modelMatrix=a.mat4.create();const o=this.resourceManager.getBSP().readLump(r.LumpType.Nodes);this.headNode=new n.BSPNode(o.nodes[s.headNode],this.resourceManager,this.modelMatrix)}draw(e,t,s,r){this.visibility!==i.Visibility.Hidden&&this.headNode.draw(e,t,s,r)}getCurrentCluster(e){return this.headNode?this.headNode.getCurrentCluster(e):null}getClusters(e,t){return this.headNode?this.headNode.getClusters(0,e,t):[]}}},{"../../../BSP/Lumps/LumpType":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LumpType.js","../IRenderable":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\RenderObjects\\IRenderable.js","./Tree.ts/BSPNode":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\RenderObjects\\BSP\\Tree.ts\\BSPNode.js","gl-matrix":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\node_modules\\gl-matrix\\dist\\gl-matrix.js"}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\RenderObjects\\BSP\\Tree.ts\\BSPLeaf.js":[function(e,t,s){"use strict";var i=this&&this.__awaiter||function(e,t,s,i){return new(s||(s=Promise))(function(r,n){function a(e){try{u(i.next(e))}catch(e){n(e)}}function o(e){try{u(i.throw(e))}catch(e){n(e)}}function u(e){e.done?r(e.value):new s(function(t){t(e.value)}).then(a,o)}u((i=i.apply(e,t||[])).next())})};Object.defineProperty(s,"__esModule",{value:!0});const r=e("../../IRenderable"),n=(e("../../../../Structs/Vertex"),e("../BSPFace")),a=e("../../../../Utils/AddRange"),o=e("../../../../BSP/Lumps/LumpType"),u=e("../../../Shaders/LayoutLocations"),l=e("../../../Shaders/ShaderSource");e("gl-matrix"),e("../../../../Utils/vec3Utils");s.BSPLeaf=class{constructor(e,t,s){this.isNode=!1,this.visibility=r.Visibility.Visible,this.shaderIndex=0,this.indexCount=0,this.indices=[],this.vertices=[],this.faces=[],this.renderMode=WebGL2RenderingContext.TRIANGLES,this.initialized=!1,this.leaf=e,this.modelMat=s,this.resourceManager=t,this.load()}load(){return i(this,void 0,void 0,function*(){this.shaderIndex=this.resourceManager.createShaderProgram(),this.resourceManager.addShaders(this.shaderIndex,[l.VertShader,l.FragShader]);const e=this.resourceManager.getBSP(),t=e.readLump(o.LumpType.Faces),s=e.readLump(o.LumpType.LeafFaces);let i=0;for(let o=this.leaf.firstLeafFace;o<this.leaf.numLeafFaces+this.leaf.firstLeafFace;o++){const u=s.leafFaces[o],l=t.faces[u],c=new n.BSPFace(l,e,this.resourceManager);this.faces.push(c),c.calcIndices(i),a.addRange(this.vertices,c.vertices),c.visibility===r.Visibility.Visible&&a.addRange(this.indices,c.indices),i=null!=c.dispInfo?c.indices[c.indices.length-2]+1:c.indices[c.indices.length-1]+1}this.indexCount=this.indices.length,this.indexCount<1||(this.bufferData(),this.initialized=!0)})}draw(e,t,s,i){if(this.visibility===r.Visibility.Hidden||!this.initialized)return;if(-1!==this.leaf.cluster&&1!==s[this.leaf.cluster])return;e.useProgram(this.resourceManager.getShaderProgram(this.shaderIndex));const n=this.resourceManager.getUniformLocations(this.shaderIndex);e.uniformMatrix4fv(n.uModelMatLocation,!1,t.modelMatrix),e.uniformMatrix4fv(n.uViewMatLocation,!1,t.viewMatrix),e.uniformMatrix4fv(n.uProjectionMatrixLocation,!1,t.projectionMatrix),e.bindVertexArray(this.VAO),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.EAO),i?e.drawElements(i,this.indexCount,e.UNSIGNED_INT,0):e.drawElements(this.renderMode,this.indexCount,e.UNSIGNED_INT,0)}getCurrentCluster(e){return e.position[0]>=this.leaf.mins[0]&&e.position[0]<=this.leaf.maxs[0]&&e.position[1]>=this.leaf.mins[1]&&e.position[1]<=this.leaf.maxs[1]&&e.position[2]>=this.leaf.mins[2]&&e.position[2]<=this.leaf.maxs[2]?this.leaf.cluster:null}bufferData(){const e=this.resourceManager.getGLContext(),t=e.createBuffer(),s=e.createVertexArray(),i=e.createBuffer();if(null==t)return void console.log("Failed to generate VBO");if(null==s)return void console.log("Failed to generate VAO");if(null==i)return void console.log("Failed to generate EAO");this.VBO=t,this.VAO=s,this.EAO=i,e.bindBuffer(e.ARRAY_BUFFER,this.VBO);const r=n.BSPFace.verticesToMesh(this.vertices);e.bufferData(e.ARRAY_BUFFER,new Float32Array(r),e.STATIC_DRAW),e.bindVertexArray(this.VAO),e.vertexAttribPointer(u.POSITION_ATTRIB_LOCATION,3,e.FLOAT,!1,56,0),e.enableVertexAttribArray(u.POSITION_ATTRIB_LOCATION),e.vertexAttribPointer(u.NORMAL_ATTRIB_LOCATION,3,e.FLOAT,!0,56,12),e.enableVertexAttribArray(u.NORMAL_ATTRIB_LOCATION),e.vertexAttribPointer(u.FALLBACK_COLOR_ATTRIB_LOCATION,4,e.FLOAT,!1,56,24),e.enableVertexAttribArray(u.FALLBACK_COLOR_ATTRIB_LOCATION),e.vertexAttribPointer(u.TEXTURE_LOADED_ATTRIB_LOCATION,1,e.FLOAT,!1,56,40),e.enableVertexAttribArray(u.TEXTURE_LOADED_ATTRIB_LOCATION),e.vertexAttribPointer(u.TEXCOORD_ATTRIB_LOCATION,2,e.FLOAT,!1,56,44),e.enableVertexAttribArray(u.TEXCOORD_ATTRIB_LOCATION),e.vertexAttribPointer(u.TEXINDEX_ATTRIB_LOCATION,1,e.FLOAT,!1,56,52),e.enableVertexAttribArray(u.TEXINDEX_ATTRIB_LOCATION),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.EAO),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint32Array(this.indices),e.STATIC_DRAW)}getClusters(e,t,s){return t&&t.includes(this.leaf.cluster),[]}}},{"../../../../BSP/Lumps/LumpType":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LumpType.js","../../../../Structs/Vertex":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Structs\\Vertex.js","../../../../Utils/AddRange":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Utils\\AddRange.js","../../../../Utils/vec3Utils":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Utils\\vec3Utils.js","../../../Shaders/LayoutLocations":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\Shaders\\LayoutLocations.js","../../../Shaders/ShaderSource":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\Shaders\\ShaderSource.js","../../IRenderable":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\RenderObjects\\IRenderable.js","../BSPFace":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\RenderObjects\\BSP\\BSPFace.js","gl-matrix":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\node_modules\\gl-matrix\\dist\\gl-matrix.js"}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\RenderObjects\\BSP\\Tree.ts\\BSPNode.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e("../../../../BSP/Lumps/LumpType"),r=e("./BSPLeaf"),n=e("../../IRenderable"),a=e("gl-matrix"),o=e("../../../../Structs/Vertex"),u=e("../../../../Utils/vec3Utils");class l{constructor(e,t,s){this.isNode=!0,this.visibility=n.Visibility.Visible,this.node=e,this.resourceManager=t;const a=this.resourceManager.getBSP(),o=a.readLump(i.LumpType.Planes);this.plane=o.planes[this.node.planeNum];const u=a.readLump(i.LumpType.Leafs),c=a.readLump(i.LumpType.Nodes);e.children[0]<0?this.front=new r.BSPLeaf(u.leaves[-(e.children[0]+1)],this.resourceManager,s):this.front=new l(c.nodes[e.children[0]],this.resourceManager,s),e.children[1]<0?this.back=new r.BSPLeaf(u.leaves[-(e.children[1]+1)],this.resourceManager,s):this.back=new l(c.nodes[e.children[1]],this.resourceManager,s)}draw(e,t,s,i){if(this.visibility!==n.Visibility.Hidden)switch(l.classifyPoint(this.plane,t.position)){case c.FRONT:this.back.draw(e,t,s,i),this.front.draw(e,t,s,i);break;case c.BACK:default:this.front.draw(e,t,s,i),this.back.draw(e,t,s,i)}}static classifyPoint(e,t){const s=a.vec3.create();a.vec3.scale(s,e.normal,e.dist);const i=a.vec3.create();a.vec3.subtract(i,t,s);const r=a.vec3.dot(i,e.normal);return r<-.001?c.BACK:r>.001?c.FRONT:c.ONPLANE}getCurrentCluster(e){if(e.position[0]>=this.node.mins[0]&&e.position[0]<=this.node.maxs[0]&&e.position[1]>=this.node.mins[1]&&e.position[1]<=this.node.maxs[1]&&e.position[2]>=this.node.mins[2]&&e.position[2]<=this.node.maxs[2]){const t=this.front.getCurrentCluster(e);return t||this.back.getCurrentCluster(e)}return null}getClusters(e=0,t,s){if(s&&e===s){const e=new o.Vertex(u.arrayToVec3(this.node.mins)),t=new o.Vertex(a.vec3.fromValues(this.node.maxs[0],this.node.mins[1],this.node.mins[2])),s=new o.Vertex(a.vec3.fromValues(this.node.mins[0],this.node.maxs[1],this.node.mins[2])),i=new o.Vertex(a.vec3.fromValues(this.node.maxs[0],this.node.maxs[1],this.node.mins[2])),r=new o.Vertex(a.vec3.fromValues(this.node.mins[0],this.node.mins[1],this.node.maxs[2])),n=new o.Vertex(a.vec3.fromValues(this.node.maxs[0],this.node.mins[1],this.node.maxs[2])),l=new o.Vertex(a.vec3.fromValues(this.node.mins[0],this.node.maxs[1],this.node.maxs[2])),c=new o.Vertex(u.arrayToVec3(this.node.maxs));return[e,t,e,s,s,i,i,t,e,r,r,n,t,n,r,l,l,c,n,c,s,l,c,i]}return this.front.getClusters(e+1,t,s).concat(this.back.getClusters(e+1,t,s))}}var c;s.BSPNode=l,function(e){e[e.FRONT=0]="FRONT",e[e.BACK=1]="BACK",e[e.ONPLANE=2]="ONPLANE"}(c=s.TreeClassification||(s.TreeClassification={}))},{"../../../../BSP/Lumps/LumpType":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\Lumps\\LumpType.js","../../../../Structs/Vertex":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Structs\\Vertex.js","../../../../Utils/vec3Utils":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Utils\\vec3Utils.js","../../IRenderable":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\RenderObjects\\IRenderable.js","./BSPLeaf":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\RenderObjects\\BSP\\Tree.ts\\BSPLeaf.js","gl-matrix":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\node_modules\\gl-matrix\\dist\\gl-matrix.js"}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\RenderObjects\\IRenderable.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),function(e){e[e.Visible=0]="Visible",e[e.Hidden=1]="Hidden"}(s.Visibility||(s.Visibility={}))},{}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\RenderObjects\\RenderObject.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e("./IRenderable"),r=e("../Shaders/LayoutLocations"),n=e("../Shaders/ShaderSource"),a=e("../Shaders/UniformLocations");class o{constructor(e,t,s=WebGL2RenderingContext.POINTS){this.visibility=i.Visibility.Visible,this.initialized=!1,this.renderType=WebGL2RenderingContext.POINTS,this.verticeCount=t.length,this.renderType=s;const u=e.createBuffer(),l=e.createVertexArray();if(null==u)return void console.log("Failed to generate VBO");if(null==l)return void console.log("Failed to generate VAO");this.VBO=u,this.VAO=l,e.bindBuffer(e.ARRAY_BUFFER,this.VBO);const c=o.concatBuffers(t.map(e=>e.position));if(e.bufferData(e.ARRAY_BUFFER,c,e.STATIC_DRAW),e.bindVertexArray(this.VAO),e.enableVertexAttribArray(r.POSITION_ATTRIB_LOCATION),e.vertexAttribPointer(r.POSITION_ATTRIB_LOCATION,3,e.FLOAT,!1,0,0),this.program=e.createProgram(),null===this.program)throw new Error("Failed to create shader program");const d=n.SimpleVertShader.compileShader(e);d&&e.attachShader(this.program,d);const m=n.SimpleFragShader.compileShader(e);m&&e.attachShader(this.program,m),e.linkProgram(this.program),e.getProgramParameter(this.program,e.LINK_STATUS)?(this.uniformLocations=new a.UniformLocations(e,this.program),this.initialized=!0):console.log("Unable to initialize shader program: "+e.getProgramInfoLog(this.program))}draw(e,t,s){this.initialized?this.visibility!==i.Visibility.Hidden&&(e.useProgram(this.program),e.uniformMatrix4fv(this.uniformLocations.uModelMatLocation,!1,t.modelMatrix),e.uniformMatrix4fv(this.uniformLocations.uViewMatLocation,!1,t.viewMatrix),e.uniformMatrix4fv(this.uniformLocations.uProjectionMatrixLocation,!1,t.projectionMatrix),e.bindVertexArray(this.VAO),e.bindBuffer(e.ARRAY_BUFFER,this.VBO),s?e.drawArrays(s,0,this.verticeCount):e.drawArrays(this.renderType,0,this.verticeCount)):console.log("Cannot render object, not initialized")}static concatBuffers(e){const t=e.map(e=>e.length),s=new Float32Array(t.reduce((e,t)=>e+t,0));for(let i=0;i<e.length;i++){const r=o.sum(t.slice(0,i));s.set(e[i],r)}return s}static sum(e){return e.reduce((e,t)=>e+t,0)}}s.RenderObject=o},{"../Shaders/LayoutLocations":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\Shaders\\LayoutLocations.js","../Shaders/ShaderSource":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\Shaders\\ShaderSource.js","../Shaders/UniformLocations":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\Shaders\\UniformLocations.js","./IRenderable":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\RenderObjects\\IRenderable.js"}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\Shaders\\LayoutLocations.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.POSITION_ATTRIB_LOCATION=0,s.NORMAL_ATTRIB_LOCATION=1,s.FALLBACK_COLOR_ATTRIB_LOCATION=2,s.TEXTURE_LOADED_ATTRIB_LOCATION=3,s.TEXCOORD_ATTRIB_LOCATION=4,s.TEXINDEX_ATTRIB_LOCATION=5},{}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\Shaders\\ShaderSource.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});class i{constructor(e,t){this.source=e,this.type=t}compileShader(e){const t=e.createShader(this.type);if(t){if(e.shaderSource(t,this.source),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))throw console.log("----------Failed to compile shader----------\n"+this.source),console.log("Info log: "+e.getShaderInfoLog(t)),e.deleteShader(t),new Error("Failed to compile shader");return t}console.error("Failed to create shader: ",this.source)}}s.ShaderSource=i,s.VertShader=new i("#version 300 es\n\nlayout (location = 0) in vec4 a_position;\nlayout (location = 1) in vec4 a_normal;\nlayout (location = 2) in vec4 a_fallbackColor;\nlayout (location = 3) in float a_textureLoaded;\nlayout (location = 4) in vec2 a_texCoord;\nlayout (location = 5) in float a_texIndex;\n\nuniform mat4 u_model_mat;\nuniform mat4 u_view_mat;\nuniform mat4 u_projection_mat;\n\nout highp vec4 v_norm;\nout highp vec4 v_fallbackColor;\nout highp vec2 v_uv;\n\nflat out int v_texIndex;\nflat out int v_textureLoaded;\n\nvoid main() {\n\tgl_Position = u_projection_mat * u_view_mat * u_model_mat * a_position;\n\n\t//temp\n\tgl_PointSize = 20.0;\n\n\tv_norm = a_normal;\n\tv_fallbackColor = a_fallbackColor;\n\tv_textureLoaded = int(a_textureLoaded);\n\tv_uv = a_texCoord;\n\tv_texIndex = int(a_texIndex);\n\n}",WebGLRenderingContext.VERTEX_SHADER),s.FragShader=new i("#version 300 es\nprecision mediump float;\n\nuniform highp sampler2DArray u_texture_array;\n\nin highp vec4 v_norm;\nin highp vec4 v_fallbackColor;\nin highp vec2 v_uv;\n\n\nflat in int v_texIndex;\nflat in int v_textureLoaded;\n\nout vec4 fragColor;\n\nvoid main() {\n\tvec4 color = vec4(0.2, 0.2, 0.2, 1.0);\n\tvec4 ambientColor = vec4(0.1, 0.1, 0.1, 1.0);\n\n\tvec4 lightDir = vec4(0.707107, 0.707107, 0, 1.0);\n\n\tfloat intensity = clamp(dot(v_norm, lightDir), 0.0, 1.0);\n\tif (intensity > 0.0) {\n\t\tcolor += (ambientColor * intensity);\n\t}\n\n\tcolor = clamp(color, 0.0, 1.0);\n\tfragColor = v_fallbackColor + color;\n\n\t// if (v_textureLoaded > 0) {\n\t// \tfragColor = vec4(1, 0, 0, 1);\n\t// \t// z index of sampler2DArray is the layer\n\t// \t// fragColor = texture(u_texture_array, vec3(v_uv, v_texIndex)) + color;\n\t// } else {\n\t// \tfragColor = vec4(0, 0, 1, 1);\n\t// \t// fragColor = v_fallbackColor + color;\n\t// }\n}",WebGLRenderingContext.FRAGMENT_SHADER),s.SimpleFragShader=new i("#version 300 es\nprecision mediump float;\n\nout vec4 fragColor;\n\nvoid main() {\n\tfragColor = vec4(0, .2, 1.0, 0.6);\n}",WebGLRenderingContext.FRAGMENT_SHADER),s.SimpleVertShader=new i("#version 300 es\n\n\tlayout (location = 0) in vec4 a_position;\n\n\tuniform mat4 u_model_mat;\n\tuniform mat4 u_view_mat;\n\tuniform mat4 u_projection_mat;\n\n\tvoid main() {\n\t\tgl_Position = u_projection_mat * u_view_mat * u_model_mat * a_position;\n\n\t\t//temp\n\t\tgl_PointSize = 20.0;\n\t}",WebGLRenderingContext.VERTEX_SHADER)},{}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\Shaders\\UniformLocations.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});s.UniformLocations=class{constructor(e,t){this.uModelMatLocation=e.getUniformLocation(t,"u_model_mat"),this.uViewMatLocation=e.getUniformLocation(t,"u_view_mat"),this.uProjectionMatrixLocation=e.getUniformLocation(t,"u_projection_mat"),this.uTextureArrayLocation=e.getUniformLocation(t,"u_sampler")}}},{}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\Textures\\Texture.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});s.Texture=class{constructor(e,t,s,i){this.placeholderColor=t,this.id=s,this.image=new Image,null!=i&&(this.name=i,this.image.src=i+".tga")}}},{}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\Textures\\TextureDictionary.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});e("../../Utils/AddRange");s.TextureDictionary=class{constructor(e){this.textures=[],this.height=256,this.width=256,this.internalFormat=WebGL2RenderingContext.RGBA8,this.currentArrayIndex=0;const t=e.createTexture();null!==t?(e.activeTexture(e.TEXTURE0),this.arrayTexture=t,e.bindTexture(e.TEXTURE_2D_ARRAY,t),e.texStorage3D(e.TEXTURE_2D_ARRAY,1,this.internalFormat,this.width,this.height,255),e.texParameteri(e.TEXTURE_2D_ARRAY,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D_ARRAY,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D_ARRAY,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D_ARRAY,e.TEXTURE_WRAP_T,e.REPEAT)):console.log("Failed to create array texture")}addTexture(e,t){for(const e in this.textures)if(this.textures.hasOwnProperty(e)&&t.name===this.textures[e].name)return this.textures[e].id;return e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D_ARRAY,this.arrayTexture),t.id=this.currentArrayIndex,null!=t.image&&(t.image.onload=(()=>{e.texSubImage3D(e.TEXTURE_2D,0,0,0,t.id,this.width,this.height,1,e.RGBA,e.UNSIGNED_BYTE,t.image)})),this.textures.push(t),this.currentArrayIndex++,this.currentArrayIndex-1}getTextureIndex(e){for(let t=0;t<this.textures.length;t++)if(this.textures[t].name===e)return this.textures[t].id;return-1}}},{"../../Utils/AddRange":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Utils\\AddRange.js"}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Structs\\Vertex.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e("gl-matrix");s.TRUE=1,s.FALSE=0;s.Vertex=class{constructor(e,t=i.vec3.create(),r=i.vec4.create(),n=s.FALSE,a=i.vec2.fromValues(0,1),o=255){this.position=e,this.normal=t,this.fallbackColor=r,this.textureLoaded=n,this.texCoord=a,this.texIndex=o}}},{"gl-matrix":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\node_modules\\gl-matrix\\dist\\gl-matrix.js"}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Utils\\AddRange.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.addRange=function(e,t){t.forEach(t=>{e.push(t)})}},{}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Utils\\KeyPress.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),function(e){e.A="A",e.B="B",e.C="C",e.D="D",e.E="E",e.F="F",e.G="G",e.H="H",e.I="I",e.J="J",e.K="K",e.L="L",e.M="M",e.N="N",e.O="O",e.P="P",e.Q="Q",e.R="R",e.S="S",e.T="T",e.U="U",e.V="V",e.W="W",e.X="X",e.Y="Y",e.Z="Z",e.Escape="Escape"}(s.Key||(s.Key={})),function(e){e.Shift="Shift"}(s.KeyModifier||(s.KeyModifier={})),function(e){e[e.Keyup=0]="Keyup",e[e.Keydown=1]="Keydown"}(s.KeyState||(s.KeyState={}));s.KeyPress=class{constructor(e,t,s){this.key=e,this.modifier=s,this.state=t}}},{}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Utils\\LimitAngle.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.limitAngle=function(e,t,s){return e<t?t:e>s?s:e}},{}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Utils\\WrapAngle.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.wrapAngle=function(e){for(;e>=360;)e-=360;for(;e<0;)e+=360;return e}},{}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Utils\\vec3Utils.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e("gl-matrix");s.arrayToVec3=function(e){return i.vec3.fromValues(e[0],e[1],e[2])}},{"gl-matrix":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\node_modules\\gl-matrix\\dist\\gl-matrix.js"}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\main.js":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e("./Rendering/EngineCore"),r=e("./Rendering/RenderObjects/RenderObject"),n=e("./BSP/BSP"),a=e("./Rendering/RenderObjects/BSP/BSPMesh");s.default=class{constructor(e){const t=document.getElementById(e);t?(this.gl=t.getContext("webgl2"),this.gl?(console.log("WebGL Version: "+this.gl.VERSION),console.log("WebGL Shader Language Version: "+this.gl.SHADING_LANGUAGE_VERSION),this.renderer=new i.EngineCore(this.gl),this.renderer.main()):alert("Unable to initialize WebGL2. Your browser may not support it.")):alert("Could not find canvas")}setupBtnListeners(){const e=document.getElementById("openBtn");if(null==e)return void console.log("Open button was null");e.addEventListener("click",this.openFileBtnCallback.bind(this),!1);const t=document.getElementById("fileDialog");t.value="",t&&(null!=t?t.addEventListener("change",()=>{if(null==t.files)return void console.log("selected files were null");const e=t.files[0];if(null!=e)if(e.name.match(/.*\.(bsp)$/gm)){const t=new FileReader;t.onloadend=(e=>{if(null==e.target)throw new Error("BSP Read Error");t.result instanceof ArrayBuffer&&this.readBSP(t.result)}),t.readAsArrayBuffer(e)}else console.log("Only BSP files are supported")},!1):console.log("fileDialog was null"))}openFileBtnCallback(){const e=document.getElementById("fileDialog");null!=e?e.click():console.log("fileDialog was null")}readBSP(e){const t=new n.BSP(e);if(null==this.gl)return;const s=new a.BSPMesh(this.gl,t),i=new r.RenderObject(this.gl,s.getClusters(void 0,2),this.gl.POINTS),o=new r.RenderObject(this.gl,s.getClusters(void 0,1),this.gl.LINES);this.renderer.clearRenderObjects(),this.renderer.addRenderableObject(s),this.renderer.addRenderableObject(i),this.renderer.addRenderableObject(o),this.renderer.renderFrame=!0}}},{"./BSP/BSP":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\BSP\\BSP.js","./Rendering/EngineCore":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\EngineCore.js","./Rendering/RenderObjects/BSP/BSPMesh":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\RenderObjects\\BSP\\BSPMesh.js","./Rendering/RenderObjects/RenderObject":"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\Rendering\\RenderObjects\\RenderObject.js"}],"C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\node_modules\\gl-matrix\\dist\\gl-matrix.js":[function(e,t,s){!function(e,i){if("object"==typeof s&&"object"==typeof t)t.exports=i();else{var r=i();for(var n in r)("object"==typeof s?s:e)[n]=r[n]}}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function s(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,s),r.l=!0,r.exports}return s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(i,r,function(t){return e[t]}.bind(null,r));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=10)}([function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setMatrixArrayType=function(e){t.ARRAY_TYPE=e},t.toRadian=function(e){return e*r},t.equals=function(e,t){return Math.abs(e-t)<=i*Math.max(1,Math.abs(e),Math.abs(t))};var i=t.EPSILON=1e-6;t.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,t.RANDOM=Math.random;var r=Math.PI/180},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.forEach=t.sqrLen=t.len=t.sqrDist=t.dist=t.div=t.mul=t.sub=void 0,t.create=r,t.clone=function(e){var t=new i.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},t.fromValues=function(e,t,s,r){var n=new i.ARRAY_TYPE(4);return n[0]=e,n[1]=t,n[2]=s,n[3]=r,n},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},t.set=function(e,t,s,i,r){return e[0]=t,e[1]=s,e[2]=i,e[3]=r,e},t.add=function(e,t,s){return e[0]=t[0]+s[0],e[1]=t[1]+s[1],e[2]=t[2]+s[2],e[3]=t[3]+s[3],e},t.subtract=n,t.multiply=a,t.divide=o,t.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e},t.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e},t.min=function(e,t,s){return e[0]=Math.min(t[0],s[0]),e[1]=Math.min(t[1],s[1]),e[2]=Math.min(t[2],s[2]),e[3]=Math.min(t[3],s[3]),e},t.max=function(e,t,s){return e[0]=Math.max(t[0],s[0]),e[1]=Math.max(t[1],s[1]),e[2]=Math.max(t[2],s[2]),e[3]=Math.max(t[3],s[3]),e},t.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e},t.scale=function(e,t,s){return e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e[3]=t[3]*s,e},t.scaleAndAdd=function(e,t,s,i){return e[0]=t[0]+s[0]*i,e[1]=t[1]+s[1]*i,e[2]=t[2]+s[2]*i,e[3]=t[3]+s[3]*i,e},t.distance=u,t.squaredDistance=l,t.length=c,t.squaredLength=d,t.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},t.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},t.normalize=function(e,t){var s=t[0],i=t[1],r=t[2],n=t[3],a=s*s+i*i+r*r+n*n;return a>0&&(a=1/Math.sqrt(a),e[0]=s*a,e[1]=i*a,e[2]=r*a,e[3]=n*a),e},t.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},t.lerp=function(e,t,s,i){var r=t[0],n=t[1],a=t[2],o=t[3];return e[0]=r+i*(s[0]-r),e[1]=n+i*(s[1]-n),e[2]=a+i*(s[2]-a),e[3]=o+i*(s[3]-o),e},t.random=function(e,t){var s,r,n,a,o,u;t=t||1;do{o=(s=2*i.RANDOM()-1)*s+(r=2*i.RANDOM()-1)*r}while(o>=1);do{u=(n=2*i.RANDOM()-1)*n+(a=2*i.RANDOM()-1)*a}while(u>=1);var l=Math.sqrt((1-o)/u);return e[0]=t*s,e[1]=t*r,e[2]=t*n*l,e[3]=t*a*l,e},t.transformMat4=function(e,t,s){var i=t[0],r=t[1],n=t[2],a=t[3];return e[0]=s[0]*i+s[4]*r+s[8]*n+s[12]*a,e[1]=s[1]*i+s[5]*r+s[9]*n+s[13]*a,e[2]=s[2]*i+s[6]*r+s[10]*n+s[14]*a,e[3]=s[3]*i+s[7]*r+s[11]*n+s[15]*a,e},t.transformQuat=function(e,t,s){var i=t[0],r=t[1],n=t[2],a=s[0],o=s[1],u=s[2],l=s[3],c=l*i+o*n-u*r,d=l*r+u*i-a*n,m=l*n+a*r-o*i,p=-a*i-o*r-u*n;return e[0]=c*l+p*-a+d*-u-m*-o,e[1]=d*l+p*-o+m*-a-c*-u,e[2]=m*l+p*-u+c*-o-d*-a,e[3]=t[3],e},t.str=function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},t.equals=function(e,t){var s=e[0],r=e[1],n=e[2],a=e[3],o=t[0],u=t[1],l=t[2],c=t[3];return Math.abs(s-o)<=i.EPSILON*Math.max(1,Math.abs(s),Math.abs(o))&&Math.abs(r-u)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(n-l)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(a-c)<=i.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))};var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t}(s(0));function r(){var e=new i.ARRAY_TYPE(4);return i.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function n(e,t,s){return e[0]=t[0]-s[0],e[1]=t[1]-s[1],e[2]=t[2]-s[2],e[3]=t[3]-s[3],e}function a(e,t,s){return e[0]=t[0]*s[0],e[1]=t[1]*s[1],e[2]=t[2]*s[2],e[3]=t[3]*s[3],e}function o(e,t,s){return e[0]=t[0]/s[0],e[1]=t[1]/s[1],e[2]=t[2]/s[2],e[3]=t[3]/s[3],e}function u(e,t){var s=t[0]-e[0],i=t[1]-e[1],r=t[2]-e[2],n=t[3]-e[3];return Math.sqrt(s*s+i*i+r*r+n*n)}function l(e,t){var s=t[0]-e[0],i=t[1]-e[1],r=t[2]-e[2],n=t[3]-e[3];return s*s+i*i+r*r+n*n}function c(e){var t=e[0],s=e[1],i=e[2],r=e[3];return Math.sqrt(t*t+s*s+i*i+r*r)}function d(e){var t=e[0],s=e[1],i=e[2],r=e[3];return t*t+s*s+i*i+r*r}t.sub=n,t.mul=a,t.div=o,t.dist=u,t.sqrDist=l,t.len=c,t.sqrLen=d,t.forEach=function(){var e=r();return function(t,s,i,r,n,a){var o,u=void 0;for(s||(s=4),i||(i=0),o=r?Math.min(r*s+i,t.length):t.length,u=i;u<o;u+=s)e[0]=t[u],e[1]=t[u+1],e[2]=t[u+2],e[3]=t[u+3],n(e,e,a),t[u]=e[0],t[u+1]=e[1],t[u+2]=e[2],t[u+3]=e[3];return t}}()},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.forEach=t.sqrLen=t.len=t.sqrDist=t.dist=t.div=t.mul=t.sub=void 0,t.create=r,t.clone=function(e){var t=new i.ARRAY_TYPE(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},t.length=n,t.fromValues=a,t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},t.set=function(e,t,s,i){return e[0]=t,e[1]=s,e[2]=i,e},t.add=function(e,t,s){return e[0]=t[0]+s[0],e[1]=t[1]+s[1],e[2]=t[2]+s[2],e},t.subtract=o,t.multiply=u,t.divide=l,t.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e},t.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e},t.min=function(e,t,s){return e[0]=Math.min(t[0],s[0]),e[1]=Math.min(t[1],s[1]),e[2]=Math.min(t[2],s[2]),e},t.max=function(e,t,s){return e[0]=Math.max(t[0],s[0]),e[1]=Math.max(t[1],s[1]),e[2]=Math.max(t[2],s[2]),e},t.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e},t.scale=function(e,t,s){return e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e},t.scaleAndAdd=function(e,t,s,i){return e[0]=t[0]+s[0]*i,e[1]=t[1]+s[1]*i,e[2]=t[2]+s[2]*i,e},t.distance=c,t.squaredDistance=d,t.squaredLength=m,t.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},t.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e},t.normalize=p,t.dot=h,t.cross=function(e,t,s){var i=t[0],r=t[1],n=t[2],a=s[0],o=s[1],u=s[2];return e[0]=r*u-n*o,e[1]=n*a-i*u,e[2]=i*o-r*a,e},t.lerp=function(e,t,s,i){var r=t[0],n=t[1],a=t[2];return e[0]=r+i*(s[0]-r),e[1]=n+i*(s[1]-n),e[2]=a+i*(s[2]-a),e},t.hermite=function(e,t,s,i,r,n){var a=n*n,o=a*(2*n-3)+1,u=a*(n-2)+n,l=a*(n-1),c=a*(3-2*n);return e[0]=t[0]*o+s[0]*u+i[0]*l+r[0]*c,e[1]=t[1]*o+s[1]*u+i[1]*l+r[1]*c,e[2]=t[2]*o+s[2]*u+i[2]*l+r[2]*c,e},t.bezier=function(e,t,s,i,r,n){var a=1-n,o=a*a,u=n*n,l=o*a,c=3*n*o,d=3*u*a,m=u*n;return e[0]=t[0]*l+s[0]*c+i[0]*d+r[0]*m,e[1]=t[1]*l+s[1]*c+i[1]*d+r[1]*m,e[2]=t[2]*l+s[2]*c+i[2]*d+r[2]*m,e},t.random=function(e,t){t=t||1;var s=2*i.RANDOM()*Math.PI,r=2*i.RANDOM()-1,n=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(s)*n,e[1]=Math.sin(s)*n,e[2]=r*t,e},t.transformMat4=function(e,t,s){var i=t[0],r=t[1],n=t[2],a=s[3]*i+s[7]*r+s[11]*n+s[15];return a=a||1,e[0]=(s[0]*i+s[4]*r+s[8]*n+s[12])/a,e[1]=(s[1]*i+s[5]*r+s[9]*n+s[13])/a,e[2]=(s[2]*i+s[6]*r+s[10]*n+s[14])/a,e},t.transformMat3=function(e,t,s){var i=t[0],r=t[1],n=t[2];return e[0]=i*s[0]+r*s[3]+n*s[6],e[1]=i*s[1]+r*s[4]+n*s[7],e[2]=i*s[2]+r*s[5]+n*s[8],e},t.transformQuat=function(e,t,s){var i=s[0],r=s[1],n=s[2],a=s[3],o=t[0],u=t[1],l=t[2],c=r*l-n*u,d=n*o-i*l,m=i*u-r*o,p=r*m-n*d,h=n*c-i*m,L=i*d-r*c,S=2*a;return c*=S,d*=S,m*=S,p*=2,h*=2,L*=2,e[0]=o+c+p,e[1]=u+d+h,e[2]=l+m+L,e},t.rotateX=function(e,t,s,i){var r=[],n=[];return r[0]=t[0]-s[0],r[1]=t[1]-s[1],r[2]=t[2]-s[2],n[0]=r[0],n[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),n[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),e[0]=n[0]+s[0],e[1]=n[1]+s[1],e[2]=n[2]+s[2],e},t.rotateY=function(e,t,s,i){var r=[],n=[];return r[0]=t[0]-s[0],r[1]=t[1]-s[1],r[2]=t[2]-s[2],n[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),n[1]=r[1],n[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),e[0]=n[0]+s[0],e[1]=n[1]+s[1],e[2]=n[2]+s[2],e},t.rotateZ=function(e,t,s,i){var r=[],n=[];return r[0]=t[0]-s[0],r[1]=t[1]-s[1],r[2]=t[2]-s[2],n[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),n[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),n[2]=r[2],e[0]=n[0]+s[0],e[1]=n[1]+s[1],e[2]=n[2]+s[2],e},t.angle=function(e,t){var s=a(e[0],e[1],e[2]),i=a(t[0],t[1],t[2]);p(s,s),p(i,i);var r=h(s,i);return r>1?0:r<-1?Math.PI:Math.acos(r)},t.str=function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},t.equals=function(e,t){var s=e[0],r=e[1],n=e[2],a=t[0],o=t[1],u=t[2];return Math.abs(s-a)<=i.EPSILON*Math.max(1,Math.abs(s),Math.abs(a))&&Math.abs(r-o)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-u)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))};var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t}(s(0));function r(){var e=new i.ARRAY_TYPE(3);return i.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function n(e){var t=e[0],s=e[1],i=e[2];return Math.sqrt(t*t+s*s+i*i)}function a(e,t,s){var r=new i.ARRAY_TYPE(3);return r[0]=e,r[1]=t,r[2]=s,r}function o(e,t,s){return e[0]=t[0]-s[0],e[1]=t[1]-s[1],e[2]=t[2]-s[2],e}function u(e,t,s){return e[0]=t[0]*s[0],e[1]=t[1]*s[1],e[2]=t[2]*s[2],e}function l(e,t,s){return e[0]=t[0]/s[0],e[1]=t[1]/s[1],e[2]=t[2]/s[2],e}function c(e,t){var s=t[0]-e[0],i=t[1]-e[1],r=t[2]-e[2];return Math.sqrt(s*s+i*i+r*r)}function d(e,t){var s=t[0]-e[0],i=t[1]-e[1],r=t[2]-e[2];return s*s+i*i+r*r}function m(e){var t=e[0],s=e[1],i=e[2];return t*t+s*s+i*i}function p(e,t){var s=t[0],i=t[1],r=t[2],n=s*s+i*i+r*r;return n>0&&(n=1/Math.sqrt(n),e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n),e}function h(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}t.sub=o,t.mul=u,t.div=l,t.dist=c,t.sqrDist=d,t.len=n,t.sqrLen=m,t.forEach=function(){var e=r();return function(t,s,i,r,n,a){var o,u=void 0;for(s||(s=3),i||(i=0),o=r?Math.min(r*s+i,t.length):t.length,u=i;u<o;u+=s)e[0]=t[u],e[1]=t[u+1],e[2]=t[u+2],n(e,e,a),t[u]=e[0],t[u+1]=e[1],t[u+2]=e[2];return t}}()},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setAxes=t.sqlerp=t.rotationTo=t.equals=t.exactEquals=t.normalize=t.sqrLen=t.squaredLength=t.len=t.length=t.lerp=t.dot=t.scale=t.mul=t.add=t.set=t.copy=t.fromValues=t.clone=void 0,t.create=u,t.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},t.setAxisAngle=l,t.getAxisAngle=function(e,t){var s=2*Math.acos(t[3]),r=Math.sin(s/2);return r>i.EPSILON?(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r):(e[0]=1,e[1]=0,e[2]=0),s},t.multiply=c,t.rotateX=function(e,t,s){s*=.5;var i=t[0],r=t[1],n=t[2],a=t[3],o=Math.sin(s),u=Math.cos(s);return e[0]=i*u+a*o,e[1]=r*u+n*o,e[2]=n*u-r*o,e[3]=a*u-i*o,e},t.rotateY=function(e,t,s){s*=.5;var i=t[0],r=t[1],n=t[2],a=t[3],o=Math.sin(s),u=Math.cos(s);return e[0]=i*u-n*o,e[1]=r*u+a*o,e[2]=n*u+i*o,e[3]=a*u-r*o,e},t.rotateZ=function(e,t,s){s*=.5;var i=t[0],r=t[1],n=t[2],a=t[3],o=Math.sin(s),u=Math.cos(s);return e[0]=i*u+r*o,e[1]=r*u-i*o,e[2]=n*u+a*o,e[3]=a*u-n*o,e},t.calculateW=function(e,t){var s=t[0],i=t[1],r=t[2];return e[0]=s,e[1]=i,e[2]=r,e[3]=Math.sqrt(Math.abs(1-s*s-i*i-r*r)),e},t.slerp=d,t.random=function(e){var t=i.RANDOM(),s=i.RANDOM(),r=i.RANDOM(),n=Math.sqrt(1-t),a=Math.sqrt(t);return e[0]=n*Math.sin(2*Math.PI*s),e[1]=n*Math.cos(2*Math.PI*s),e[2]=a*Math.sin(2*Math.PI*r),e[3]=a*Math.cos(2*Math.PI*r),e},t.invert=function(e,t){var s=t[0],i=t[1],r=t[2],n=t[3],a=s*s+i*i+r*r+n*n,o=a?1/a:0;return e[0]=-s*o,e[1]=-i*o,e[2]=-r*o,e[3]=n*o,e},t.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},t.fromMat3=m,t.fromEuler=function(e,t,s,i){var r=.5*Math.PI/180;t*=r,s*=r,i*=r;var n=Math.sin(t),a=Math.cos(t),o=Math.sin(s),u=Math.cos(s),l=Math.sin(i),c=Math.cos(i);return e[0]=n*u*c-a*o*l,e[1]=a*o*c+n*u*l,e[2]=a*u*l-n*o*c,e[3]=a*u*c+n*o*l,e},t.str=function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"};var i=o(s(0)),r=o(s(5)),n=o(s(2)),a=o(s(1));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t}function u(){var e=new i.ARRAY_TYPE(4);return i.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function l(e,t,s){s*=.5;var i=Math.sin(s);return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=Math.cos(s),e}function c(e,t,s){var i=t[0],r=t[1],n=t[2],a=t[3],o=s[0],u=s[1],l=s[2],c=s[3];return e[0]=i*c+a*o+r*l-n*u,e[1]=r*c+a*u+n*o-i*l,e[2]=n*c+a*l+i*u-r*o,e[3]=a*c-i*o-r*u-n*l,e}function d(e,t,s,r){var n=t[0],a=t[1],o=t[2],u=t[3],l=s[0],c=s[1],d=s[2],m=s[3],p=void 0,h=void 0,L=void 0,S=void 0,f=void 0;return(h=n*l+a*c+o*d+u*m)<0&&(h=-h,l=-l,c=-c,d=-d,m=-m),1-h>i.EPSILON?(p=Math.acos(h),L=Math.sin(p),S=Math.sin((1-r)*p)/L,f=Math.sin(r*p)/L):(S=1-r,f=r),e[0]=S*n+f*l,e[1]=S*a+f*c,e[2]=S*o+f*d,e[3]=S*u+f*m,e}function m(e,t){var s=t[0]+t[4]+t[8],i=void 0;if(s>0)i=Math.sqrt(s+1),e[3]=.5*i,i=.5/i,e[0]=(t[5]-t[7])*i,e[1]=(t[6]-t[2])*i,e[2]=(t[1]-t[3])*i;else{var r=0;t[4]>t[0]&&(r=1),t[8]>t[3*r+r]&&(r=2);var n=(r+1)%3,a=(r+2)%3;i=Math.sqrt(t[3*r+r]-t[3*n+n]-t[3*a+a]+1),e[r]=.5*i,i=.5/i,e[3]=(t[3*n+a]-t[3*a+n])*i,e[n]=(t[3*n+r]+t[3*r+n])*i,e[a]=(t[3*a+r]+t[3*r+a])*i}return e}t.clone=a.clone,t.fromValues=a.fromValues,t.copy=a.copy,t.set=a.set,t.add=a.add,t.mul=c,t.scale=a.scale,t.dot=a.dot,t.lerp=a.lerp;var p=t.length=a.length,h=(t.len=p,t.squaredLength=a.squaredLength),L=(t.sqrLen=h,t.normalize=a.normalize);t.exactEquals=a.exactEquals,t.equals=a.equals,t.rotationTo=function(){var e=n.create(),t=n.fromValues(1,0,0),s=n.fromValues(0,1,0);return function(i,r,a){var o=n.dot(r,a);return o<-.999999?(n.cross(e,t,r),n.len(e)<1e-6&&n.cross(e,s,r),n.normalize(e,e),l(i,e,Math.PI),i):o>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(n.cross(e,r,a),i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=1+o,L(i,i))}}(),t.sqlerp=function(){var e=u(),t=u();return function(s,i,r,n,a,o){return d(e,i,a,o),d(t,r,n,o),d(s,e,t,2*o*(1-o)),s}}(),t.setAxes=function(){var e=r.create();return function(t,s,i,r){return e[0]=i[0],e[3]=i[1],e[6]=i[2],e[1]=r[0],e[4]=r[1],e[7]=r[2],e[2]=-s[0],e[5]=-s[1],e[8]=-s[2],L(t,m(t,e))}}()},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sub=t.mul=void 0,t.create=function(){var e=new i.ARRAY_TYPE(16);return i.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},t.clone=function(e){var t=new i.ARRAY_TYPE(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.fromValues=function(e,t,s,r,n,a,o,u,l,c,d,m,p,h,L,S){var f=new i.ARRAY_TYPE(16);return f[0]=e,f[1]=t,f[2]=s,f[3]=r,f[4]=n,f[5]=a,f[6]=o,f[7]=u,f[8]=l,f[9]=c,f[10]=d,f[11]=m,f[12]=p,f[13]=h,f[14]=L,f[15]=S,f},t.set=function(e,t,s,i,r,n,a,o,u,l,c,d,m,p,h,L,S){return e[0]=t,e[1]=s,e[2]=i,e[3]=r,e[4]=n,e[5]=a,e[6]=o,e[7]=u,e[8]=l,e[9]=c,e[10]=d,e[11]=m,e[12]=p,e[13]=h,e[14]=L,e[15]=S,e},t.identity=r,t.transpose=function(e,t){if(e===t){var s=t[1],i=t[2],r=t[3],n=t[6],a=t[7],o=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=s,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=n,e[11]=t[14],e[12]=r,e[13]=a,e[14]=o}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},t.invert=function(e,t){var s=t[0],i=t[1],r=t[2],n=t[3],a=t[4],o=t[5],u=t[6],l=t[7],c=t[8],d=t[9],m=t[10],p=t[11],h=t[12],L=t[13],S=t[14],f=t[15],P=s*o-i*a,b=s*u-r*a,g=s*l-n*a,v=i*u-r*o,D=i*l-n*o,B=r*l-n*u,M=c*L-d*h,y=c*S-m*h,O=c*f-p*h,T=d*S-m*L,j=d*f-p*L,R=m*f-p*S,I=P*R-b*j+g*T+v*O-D*y+B*M;return I?(I=1/I,e[0]=(o*R-u*j+l*T)*I,e[1]=(r*j-i*R-n*T)*I,e[2]=(L*B-S*D+f*v)*I,e[3]=(m*D-d*B-p*v)*I,e[4]=(u*O-a*R-l*y)*I,e[5]=(s*R-r*O+n*y)*I,e[6]=(S*g-h*B-f*b)*I,e[7]=(c*B-m*g+p*b)*I,e[8]=(a*j-o*O+l*M)*I,e[9]=(i*O-s*j-n*M)*I,e[10]=(h*D-L*g+f*P)*I,e[11]=(d*g-c*D-p*P)*I,e[12]=(o*y-a*T-u*M)*I,e[13]=(s*T-i*y+r*M)*I,e[14]=(L*b-h*v-S*P)*I,e[15]=(c*v-d*b+m*P)*I,e):null},t.adjoint=function(e,t){var s=t[0],i=t[1],r=t[2],n=t[3],a=t[4],o=t[5],u=t[6],l=t[7],c=t[8],d=t[9],m=t[10],p=t[11],h=t[12],L=t[13],S=t[14],f=t[15];return e[0]=o*(m*f-p*S)-d*(u*f-l*S)+L*(u*p-l*m),e[1]=-(i*(m*f-p*S)-d*(r*f-n*S)+L*(r*p-n*m)),e[2]=i*(u*f-l*S)-o*(r*f-n*S)+L*(r*l-n*u),e[3]=-(i*(u*p-l*m)-o*(r*p-n*m)+d*(r*l-n*u)),e[4]=-(a*(m*f-p*S)-c*(u*f-l*S)+h*(u*p-l*m)),e[5]=s*(m*f-p*S)-c*(r*f-n*S)+h*(r*p-n*m),e[6]=-(s*(u*f-l*S)-a*(r*f-n*S)+h*(r*l-n*u)),e[7]=s*(u*p-l*m)-a*(r*p-n*m)+c*(r*l-n*u),e[8]=a*(d*f-p*L)-c*(o*f-l*L)+h*(o*p-l*d),e[9]=-(s*(d*f-p*L)-c*(i*f-n*L)+h*(i*p-n*d)),e[10]=s*(o*f-l*L)-a*(i*f-n*L)+h*(i*l-n*o),e[11]=-(s*(o*p-l*d)-a*(i*p-n*d)+c*(i*l-n*o)),e[12]=-(a*(d*S-m*L)-c*(o*S-u*L)+h*(o*m-u*d)),e[13]=s*(d*S-m*L)-c*(i*S-r*L)+h*(i*m-r*d),e[14]=-(s*(o*S-u*L)-a*(i*S-r*L)+h*(i*u-r*o)),e[15]=s*(o*m-u*d)-a*(i*m-r*d)+c*(i*u-r*o),e},t.determinant=function(e){var t=e[0],s=e[1],i=e[2],r=e[3],n=e[4],a=e[5],o=e[6],u=e[7],l=e[8],c=e[9],d=e[10],m=e[11],p=e[12],h=e[13],L=e[14],S=e[15];return(t*a-s*n)*(d*S-m*L)-(t*o-i*n)*(c*S-m*h)+(t*u-r*n)*(c*L-d*h)+(s*o-i*a)*(l*S-m*p)-(s*u-r*a)*(l*L-d*p)+(i*u-r*o)*(l*h-c*p)},t.multiply=n,t.translate=function(e,t,s){var i=s[0],r=s[1],n=s[2],a=void 0,o=void 0,u=void 0,l=void 0,c=void 0,d=void 0,m=void 0,p=void 0,h=void 0,L=void 0,S=void 0,f=void 0;return t===e?(e[12]=t[0]*i+t[4]*r+t[8]*n+t[12],e[13]=t[1]*i+t[5]*r+t[9]*n+t[13],e[14]=t[2]*i+t[6]*r+t[10]*n+t[14],e[15]=t[3]*i+t[7]*r+t[11]*n+t[15]):(a=t[0],o=t[1],u=t[2],l=t[3],c=t[4],d=t[5],m=t[6],p=t[7],h=t[8],L=t[9],S=t[10],f=t[11],e[0]=a,e[1]=o,e[2]=u,e[3]=l,e[4]=c,e[5]=d,e[6]=m,e[7]=p,e[8]=h,e[9]=L,e[10]=S,e[11]=f,e[12]=a*i+c*r+h*n+t[12],e[13]=o*i+d*r+L*n+t[13],e[14]=u*i+m*r+S*n+t[14],e[15]=l*i+p*r+f*n+t[15]),e},t.scale=function(e,t,s){var i=s[0],r=s[1],n=s[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.rotate=function(e,t,s,r){var n,a,o,u,l,c,d,m,p,h,L,S,f,P,b,g,v,D,B,M,y,O,T,j,R=r[0],I=r[1],C=r[2],W=Math.sqrt(R*R+I*I+C*C);return W<i.EPSILON?null:(R*=W=1/W,I*=W,C*=W,n=Math.sin(s),o=1-(a=Math.cos(s)),u=t[0],l=t[1],c=t[2],d=t[3],m=t[4],p=t[5],h=t[6],L=t[7],S=t[8],f=t[9],P=t[10],b=t[11],g=R*R*o+a,v=I*R*o+C*n,D=C*R*o-I*n,B=R*I*o-C*n,M=I*I*o+a,y=C*I*o+R*n,O=R*C*o+I*n,T=I*C*o-R*n,j=C*C*o+a,e[0]=u*g+m*v+S*D,e[1]=l*g+p*v+f*D,e[2]=c*g+h*v+P*D,e[3]=d*g+L*v+b*D,e[4]=u*B+m*M+S*y,e[5]=l*B+p*M+f*y,e[6]=c*B+h*M+P*y,e[7]=d*B+L*M+b*y,e[8]=u*O+m*T+S*j,e[9]=l*O+p*T+f*j,e[10]=c*O+h*T+P*j,e[11]=d*O+L*T+b*j,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)},t.rotateX=function(e,t,s){var i=Math.sin(s),r=Math.cos(s),n=t[4],a=t[5],o=t[6],u=t[7],l=t[8],c=t[9],d=t[10],m=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=n*r+l*i,e[5]=a*r+c*i,e[6]=o*r+d*i,e[7]=u*r+m*i,e[8]=l*r-n*i,e[9]=c*r-a*i,e[10]=d*r-o*i,e[11]=m*r-u*i,e},t.rotateY=function(e,t,s){var i=Math.sin(s),r=Math.cos(s),n=t[0],a=t[1],o=t[2],u=t[3],l=t[8],c=t[9],d=t[10],m=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=n*r-l*i,e[1]=a*r-c*i,e[2]=o*r-d*i,e[3]=u*r-m*i,e[8]=n*i+l*r,e[9]=a*i+c*r,e[10]=o*i+d*r,e[11]=u*i+m*r,e},t.rotateZ=function(e,t,s){var i=Math.sin(s),r=Math.cos(s),n=t[0],a=t[1],o=t[2],u=t[3],l=t[4],c=t[5],d=t[6],m=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=n*r+l*i,e[1]=a*r+c*i,e[2]=o*r+d*i,e[3]=u*r+m*i,e[4]=l*r-n*i,e[5]=c*r-a*i,e[6]=d*r-o*i,e[7]=m*r-u*i,e},t.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},t.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromRotation=function(e,t,s){var r,n,a,o=s[0],u=s[1],l=s[2],c=Math.sqrt(o*o+u*u+l*l);return c<i.EPSILON?null:(o*=c=1/c,u*=c,l*=c,r=Math.sin(t),a=1-(n=Math.cos(t)),e[0]=o*o*a+n,e[1]=u*o*a+l*r,e[2]=l*o*a-u*r,e[3]=0,e[4]=o*u*a-l*r,e[5]=u*u*a+n,e[6]=l*u*a+o*r,e[7]=0,e[8]=o*l*a+u*r,e[9]=u*l*a-o*r,e[10]=l*l*a+n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)},t.fromXRotation=function(e,t){var s=Math.sin(t),i=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=s,e[7]=0,e[8]=0,e[9]=-s,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromYRotation=function(e,t){var s=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=0,e[2]=-s,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=s,e[9]=0,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromZRotation=function(e,t){var s=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=s,e[2]=0,e[3]=0,e[4]=-s,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromRotationTranslation=a,t.fromQuat2=function(e,t){var s=new i.ARRAY_TYPE(3),r=-t[0],n=-t[1],o=-t[2],u=t[3],l=t[4],c=t[5],d=t[6],m=t[7],p=r*r+n*n+o*o+u*u;return p>0?(s[0]=2*(l*u+m*r+c*o-d*n)/p,s[1]=2*(c*u+m*n+d*r-l*o)/p,s[2]=2*(d*u+m*o+l*n-c*r)/p):(s[0]=2*(l*u+m*r+c*o-d*n),s[1]=2*(c*u+m*n+d*r-l*o),s[2]=2*(d*u+m*o+l*n-c*r)),a(e,t,s),e},t.getTranslation=function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e},t.getScaling=function(e,t){var s=t[0],i=t[1],r=t[2],n=t[4],a=t[5],o=t[6],u=t[8],l=t[9],c=t[10];return e[0]=Math.sqrt(s*s+i*i+r*r),e[1]=Math.sqrt(n*n+a*a+o*o),e[2]=Math.sqrt(u*u+l*l+c*c),e},t.getRotation=function(e,t){var s=t[0]+t[5]+t[10],i=0;return s>0?(i=2*Math.sqrt(s+1),e[3]=.25*i,e[0]=(t[6]-t[9])/i,e[1]=(t[8]-t[2])/i,e[2]=(t[1]-t[4])/i):t[0]>t[5]&&t[0]>t[10]?(i=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/i,e[0]=.25*i,e[1]=(t[1]+t[4])/i,e[2]=(t[8]+t[2])/i):t[5]>t[10]?(i=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/i,e[0]=(t[1]+t[4])/i,e[1]=.25*i,e[2]=(t[6]+t[9])/i):(i=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/i,e[0]=(t[8]+t[2])/i,e[1]=(t[6]+t[9])/i,e[2]=.25*i),e},t.fromRotationTranslationScale=function(e,t,s,i){var r=t[0],n=t[1],a=t[2],o=t[3],u=r+r,l=n+n,c=a+a,d=r*u,m=r*l,p=r*c,h=n*l,L=n*c,S=a*c,f=o*u,P=o*l,b=o*c,g=i[0],v=i[1],D=i[2];return e[0]=(1-(h+S))*g,e[1]=(m+b)*g,e[2]=(p-P)*g,e[3]=0,e[4]=(m-b)*v,e[5]=(1-(d+S))*v,e[6]=(L+f)*v,e[7]=0,e[8]=(p+P)*D,e[9]=(L-f)*D,e[10]=(1-(d+h))*D,e[11]=0,e[12]=s[0],e[13]=s[1],e[14]=s[2],e[15]=1,e},t.fromRotationTranslationScaleOrigin=function(e,t,s,i,r){var n=t[0],a=t[1],o=t[2],u=t[3],l=n+n,c=a+a,d=o+o,m=n*l,p=n*c,h=n*d,L=a*c,S=a*d,f=o*d,P=u*l,b=u*c,g=u*d,v=i[0],D=i[1],B=i[2],M=r[0],y=r[1],O=r[2],T=(1-(L+f))*v,j=(p+g)*v,R=(h-b)*v,I=(p-g)*D,C=(1-(m+f))*D,W=(S+P)*D,_=(h+b)*B,U=(S-P)*B,E=(1-(m+L))*B;return e[0]=T,e[1]=j,e[2]=R,e[3]=0,e[4]=I,e[5]=C,e[6]=W,e[7]=0,e[8]=_,e[9]=U,e[10]=E,e[11]=0,e[12]=s[0]+M-(T*M+I*y+_*O),e[13]=s[1]+y-(j*M+C*y+U*O),e[14]=s[2]+O-(R*M+W*y+E*O),e[15]=1,e},t.fromQuat=function(e,t){var s=t[0],i=t[1],r=t[2],n=t[3],a=s+s,o=i+i,u=r+r,l=s*a,c=i*a,d=i*o,m=r*a,p=r*o,h=r*u,L=n*a,S=n*o,f=n*u;return e[0]=1-d-h,e[1]=c+f,e[2]=m-S,e[3]=0,e[4]=c-f,e[5]=1-l-h,e[6]=p+L,e[7]=0,e[8]=m+S,e[9]=p-L,e[10]=1-l-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.frustum=function(e,t,s,i,r,n,a){var o=1/(s-t),u=1/(r-i),l=1/(n-a);return e[0]=2*n*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*n*u,e[6]=0,e[7]=0,e[8]=(s+t)*o,e[9]=(r+i)*u,e[10]=(a+n)*l,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*n*2*l,e[15]=0,e},t.perspective=function(e,t,s,i,r){var n=1/Math.tan(t/2),a=void 0;return e[0]=n/s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=r&&r!==1/0?(a=1/(i-r),e[10]=(r+i)*a,e[14]=2*r*i*a):(e[10]=-1,e[14]=-2*i),e},t.perspectiveFromFieldOfView=function(e,t,s,i){var r=Math.tan(t.upDegrees*Math.PI/180),n=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),o=Math.tan(t.rightDegrees*Math.PI/180),u=2/(a+o),l=2/(r+n);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=-(a-o)*u*.5,e[9]=(r-n)*l*.5,e[10]=i/(s-i),e[11]=-1,e[12]=0,e[13]=0,e[14]=i*s/(s-i),e[15]=0,e},t.ortho=function(e,t,s,i,r,n,a){var o=1/(t-s),u=1/(i-r),l=1/(n-a);return e[0]=-2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+s)*o,e[13]=(r+i)*u,e[14]=(a+n)*l,e[15]=1,e},t.lookAt=function(e,t,s,n){var a=void 0,o=void 0,u=void 0,l=void 0,c=void 0,d=void 0,m=void 0,p=void 0,h=void 0,L=void 0,S=t[0],f=t[1],P=t[2],b=n[0],g=n[1],v=n[2],D=s[0],B=s[1],M=s[2];return Math.abs(S-D)<i.EPSILON&&Math.abs(f-B)<i.EPSILON&&Math.abs(P-M)<i.EPSILON?r(e):(m=S-D,p=f-B,h=P-M,a=g*(h*=L=1/Math.sqrt(m*m+p*p+h*h))-v*(p*=L),o=v*(m*=L)-b*h,u=b*p-g*m,(L=Math.sqrt(a*a+o*o+u*u))?(a*=L=1/L,o*=L,u*=L):(a=0,o=0,u=0),l=p*u-h*o,c=h*a-m*u,d=m*o-p*a,(L=Math.sqrt(l*l+c*c+d*d))?(l*=L=1/L,c*=L,d*=L):(l=0,c=0,d=0),e[0]=a,e[1]=l,e[2]=m,e[3]=0,e[4]=o,e[5]=c,e[6]=p,e[7]=0,e[8]=u,e[9]=d,e[10]=h,e[11]=0,e[12]=-(a*S+o*f+u*P),e[13]=-(l*S+c*f+d*P),e[14]=-(m*S+p*f+h*P),e[15]=1,e)},t.targetTo=function(e,t,s,i){var r=t[0],n=t[1],a=t[2],o=i[0],u=i[1],l=i[2],c=r-s[0],d=n-s[1],m=a-s[2],p=c*c+d*d+m*m;p>0&&(c*=p=1/Math.sqrt(p),d*=p,m*=p);var h=u*m-l*d,L=l*c-o*m,S=o*d-u*c;return(p=h*h+L*L+S*S)>0&&(h*=p=1/Math.sqrt(p),L*=p,S*=p),e[0]=h,e[1]=L,e[2]=S,e[3]=0,e[4]=d*S-m*L,e[5]=m*h-c*S,e[6]=c*L-d*h,e[7]=0,e[8]=c,e[9]=d,e[10]=m,e[11]=0,e[12]=r,e[13]=n,e[14]=a,e[15]=1,e},t.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},t.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))},t.add=function(e,t,s){return e[0]=t[0]+s[0],e[1]=t[1]+s[1],e[2]=t[2]+s[2],e[3]=t[3]+s[3],e[4]=t[4]+s[4],e[5]=t[5]+s[5],e[6]=t[6]+s[6],e[7]=t[7]+s[7],e[8]=t[8]+s[8],e[9]=t[9]+s[9],e[10]=t[10]+s[10],e[11]=t[11]+s[11],e[12]=t[12]+s[12],e[13]=t[13]+s[13],e[14]=t[14]+s[14],e[15]=t[15]+s[15],e},t.subtract=o,t.multiplyScalar=function(e,t,s){return e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e[3]=t[3]*s,e[4]=t[4]*s,e[5]=t[5]*s,e[6]=t[6]*s,e[7]=t[7]*s,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12]*s,e[13]=t[13]*s,e[14]=t[14]*s,e[15]=t[15]*s,e},t.multiplyScalarAndAdd=function(e,t,s,i){return e[0]=t[0]+s[0]*i,e[1]=t[1]+s[1]*i,e[2]=t[2]+s[2]*i,e[3]=t[3]+s[3]*i,e[4]=t[4]+s[4]*i,e[5]=t[5]+s[5]*i,e[6]=t[6]+s[6]*i,e[7]=t[7]+s[7]*i,e[8]=t[8]+s[8]*i,e[9]=t[9]+s[9]*i,e[10]=t[10]+s[10]*i,e[11]=t[11]+s[11]*i,e[12]=t[12]+s[12]*i,e[13]=t[13]+s[13]*i,e[14]=t[14]+s[14]*i,e[15]=t[15]+s[15]*i,e},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},t.equals=function(e,t){var s=e[0],r=e[1],n=e[2],a=e[3],o=e[4],u=e[5],l=e[6],c=e[7],d=e[8],m=e[9],p=e[10],h=e[11],L=e[12],S=e[13],f=e[14],P=e[15],b=t[0],g=t[1],v=t[2],D=t[3],B=t[4],M=t[5],y=t[6],O=t[7],T=t[8],j=t[9],R=t[10],I=t[11],C=t[12],W=t[13],_=t[14],U=t[15];return Math.abs(s-b)<=i.EPSILON*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(r-g)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(g))&&Math.abs(n-v)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(a-D)<=i.EPSILON*Math.max(1,Math.abs(a),Math.abs(D))&&Math.abs(o-B)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(B))&&Math.abs(u-M)<=i.EPSILON*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(l-y)<=i.EPSILON*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(c-O)<=i.EPSILON*Math.max(1,Math.abs(c),Math.abs(O))&&Math.abs(d-T)<=i.EPSILON*Math.max(1,Math.abs(d),Math.abs(T))&&Math.abs(m-j)<=i.EPSILON*Math.max(1,Math.abs(m),Math.abs(j))&&Math.abs(p-R)<=i.EPSILON*Math.max(1,Math.abs(p),Math.abs(R))&&Math.abs(h-I)<=i.EPSILON*Math.max(1,Math.abs(h),Math.abs(I))&&Math.abs(L-C)<=i.EPSILON*Math.max(1,Math.abs(L),Math.abs(C))&&Math.abs(S-W)<=i.EPSILON*Math.max(1,Math.abs(S),Math.abs(W))&&Math.abs(f-_)<=i.EPSILON*Math.max(1,Math.abs(f),Math.abs(_))&&Math.abs(P-U)<=i.EPSILON*Math.max(1,Math.abs(P),Math.abs(U))};var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t}(s(0));function r(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function n(e,t,s){var i=t[0],r=t[1],n=t[2],a=t[3],o=t[4],u=t[5],l=t[6],c=t[7],d=t[8],m=t[9],p=t[10],h=t[11],L=t[12],S=t[13],f=t[14],P=t[15],b=s[0],g=s[1],v=s[2],D=s[3];return e[0]=b*i+g*o+v*d+D*L,e[1]=b*r+g*u+v*m+D*S,e[2]=b*n+g*l+v*p+D*f,e[3]=b*a+g*c+v*h+D*P,b=s[4],g=s[5],v=s[6],D=s[7],e[4]=b*i+g*o+v*d+D*L,e[5]=b*r+g*u+v*m+D*S,e[6]=b*n+g*l+v*p+D*f,e[7]=b*a+g*c+v*h+D*P,b=s[8],g=s[9],v=s[10],D=s[11],e[8]=b*i+g*o+v*d+D*L,e[9]=b*r+g*u+v*m+D*S,e[10]=b*n+g*l+v*p+D*f,e[11]=b*a+g*c+v*h+D*P,b=s[12],g=s[13],v=s[14],D=s[15],e[12]=b*i+g*o+v*d+D*L,e[13]=b*r+g*u+v*m+D*S,e[14]=b*n+g*l+v*p+D*f,e[15]=b*a+g*c+v*h+D*P,e}function a(e,t,s){var i=t[0],r=t[1],n=t[2],a=t[3],o=i+i,u=r+r,l=n+n,c=i*o,d=i*u,m=i*l,p=r*u,h=r*l,L=n*l,S=a*o,f=a*u,P=a*l;return e[0]=1-(p+L),e[1]=d+P,e[2]=m-f,e[3]=0,e[4]=d-P,e[5]=1-(c+L),e[6]=h+S,e[7]=0,e[8]=m+f,e[9]=h-S,e[10]=1-(c+p),e[11]=0,e[12]=s[0],e[13]=s[1],e[14]=s[2],e[15]=1,e}function o(e,t,s){return e[0]=t[0]-s[0],e[1]=t[1]-s[1],e[2]=t[2]-s[2],e[3]=t[3]-s[3],e[4]=t[4]-s[4],e[5]=t[5]-s[5],e[6]=t[6]-s[6],e[7]=t[7]-s[7],e[8]=t[8]-s[8],e[9]=t[9]-s[9],e[10]=t[10]-s[10],e[11]=t[11]-s[11],e[12]=t[12]-s[12],e[13]=t[13]-s[13],e[14]=t[14]-s[14],e[15]=t[15]-s[15],e}t.mul=n,t.sub=o},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sub=t.mul=void 0,t.create=function(){var e=new i.ARRAY_TYPE(9);return i.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e},t.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},t.clone=function(e){var t=new i.ARRAY_TYPE(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},t.fromValues=function(e,t,s,r,n,a,o,u,l){var c=new i.ARRAY_TYPE(9);return c[0]=e,c[1]=t,c[2]=s,c[3]=r,c[4]=n,c[5]=a,c[6]=o,c[7]=u,c[8]=l,c},t.set=function(e,t,s,i,r,n,a,o,u,l){return e[0]=t,e[1]=s,e[2]=i,e[3]=r,e[4]=n,e[5]=a,e[6]=o,e[7]=u,e[8]=l,e},t.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},t.transpose=function(e,t){if(e===t){var s=t[1],i=t[2],r=t[5];e[1]=t[3],e[2]=t[6],e[3]=s,e[5]=t[7],e[6]=i,e[7]=r}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},t.invert=function(e,t){var s=t[0],i=t[1],r=t[2],n=t[3],a=t[4],o=t[5],u=t[6],l=t[7],c=t[8],d=c*a-o*l,m=-c*n+o*u,p=l*n-a*u,h=s*d+i*m+r*p;return h?(h=1/h,e[0]=d*h,e[1]=(-c*i+r*l)*h,e[2]=(o*i-r*a)*h,e[3]=m*h,e[4]=(c*s-r*u)*h,e[5]=(-o*s+r*n)*h,e[6]=p*h,e[7]=(-l*s+i*u)*h,e[8]=(a*s-i*n)*h,e):null},t.adjoint=function(e,t){var s=t[0],i=t[1],r=t[2],n=t[3],a=t[4],o=t[5],u=t[6],l=t[7],c=t[8];return e[0]=a*c-o*l,e[1]=r*l-i*c,e[2]=i*o-r*a,e[3]=o*u-n*c,e[4]=s*c-r*u,e[5]=r*n-s*o,e[6]=n*l-a*u,e[7]=i*u-s*l,e[8]=s*a-i*n,e},t.determinant=function(e){var t=e[0],s=e[1],i=e[2],r=e[3],n=e[4],a=e[5],o=e[6],u=e[7],l=e[8];return t*(l*n-a*u)+s*(-l*r+a*o)+i*(u*r-n*o)},t.multiply=r,t.translate=function(e,t,s){var i=t[0],r=t[1],n=t[2],a=t[3],o=t[4],u=t[5],l=t[6],c=t[7],d=t[8],m=s[0],p=s[1];return e[0]=i,e[1]=r,e[2]=n,e[3]=a,e[4]=o,e[5]=u,e[6]=m*i+p*a+l,e[7]=m*r+p*o+c,e[8]=m*n+p*u+d,e},t.rotate=function(e,t,s){var i=t[0],r=t[1],n=t[2],a=t[3],o=t[4],u=t[5],l=t[6],c=t[7],d=t[8],m=Math.sin(s),p=Math.cos(s);return e[0]=p*i+m*a,e[1]=p*r+m*o,e[2]=p*n+m*u,e[3]=p*a-m*i,e[4]=p*o-m*r,e[5]=p*u-m*n,e[6]=l,e[7]=c,e[8]=d,e},t.scale=function(e,t,s){var i=s[0],r=s[1];return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=r*t[3],e[4]=r*t[4],e[5]=r*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},t.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e},t.fromRotation=function(e,t){var s=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=s,e[2]=0,e[3]=-s,e[4]=i,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},t.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},t.fromMat2d=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},t.fromQuat=function(e,t){var s=t[0],i=t[1],r=t[2],n=t[3],a=s+s,o=i+i,u=r+r,l=s*a,c=i*a,d=i*o,m=r*a,p=r*o,h=r*u,L=n*a,S=n*o,f=n*u;return e[0]=1-d-h,e[3]=c-f,e[6]=m+S,e[1]=c+f,e[4]=1-l-h,e[7]=p-L,e[2]=m-S,e[5]=p+L,e[8]=1-l-d,e},t.normalFromMat4=function(e,t){var s=t[0],i=t[1],r=t[2],n=t[3],a=t[4],o=t[5],u=t[6],l=t[7],c=t[8],d=t[9],m=t[10],p=t[11],h=t[12],L=t[13],S=t[14],f=t[15],P=s*o-i*a,b=s*u-r*a,g=s*l-n*a,v=i*u-r*o,D=i*l-n*o,B=r*l-n*u,M=c*L-d*h,y=c*S-m*h,O=c*f-p*h,T=d*S-m*L,j=d*f-p*L,R=m*f-p*S,I=P*R-b*j+g*T+v*O-D*y+B*M;return I?(I=1/I,e[0]=(o*R-u*j+l*T)*I,e[1]=(u*O-a*R-l*y)*I,e[2]=(a*j-o*O+l*M)*I,e[3]=(r*j-i*R-n*T)*I,e[4]=(s*R-r*O+n*y)*I,e[5]=(i*O-s*j-n*M)*I,e[6]=(L*B-S*D+f*v)*I,e[7]=(S*g-h*B-f*b)*I,e[8]=(h*D-L*g+f*P)*I,e):null},t.projection=function(e,t,s){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/s,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e},t.str=function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},t.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))},t.add=function(e,t,s){return e[0]=t[0]+s[0],e[1]=t[1]+s[1],e[2]=t[2]+s[2],e[3]=t[3]+s[3],e[4]=t[4]+s[4],e[5]=t[5]+s[5],e[6]=t[6]+s[6],e[7]=t[7]+s[7],e[8]=t[8]+s[8],e},t.subtract=n,t.multiplyScalar=function(e,t,s){return e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e[3]=t[3]*s,e[4]=t[4]*s,e[5]=t[5]*s,e[6]=t[6]*s,e[7]=t[7]*s,e[8]=t[8]*s,e},t.multiplyScalarAndAdd=function(e,t,s,i){return e[0]=t[0]+s[0]*i,e[1]=t[1]+s[1]*i,e[2]=t[2]+s[2]*i,e[3]=t[3]+s[3]*i,e[4]=t[4]+s[4]*i,e[5]=t[5]+s[5]*i,e[6]=t[6]+s[6]*i,e[7]=t[7]+s[7]*i,e[8]=t[8]+s[8]*i,e},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},t.equals=function(e,t){var s=e[0],r=e[1],n=e[2],a=e[3],o=e[4],u=e[5],l=e[6],c=e[7],d=e[8],m=t[0],p=t[1],h=t[2],L=t[3],S=t[4],f=t[5],P=t[6],b=t[7],g=t[8];return Math.abs(s-m)<=i.EPSILON*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(r-p)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(n-h)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(a-L)<=i.EPSILON*Math.max(1,Math.abs(a),Math.abs(L))&&Math.abs(o-S)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(S))&&Math.abs(u-f)<=i.EPSILON*Math.max(1,Math.abs(u),Math.abs(f))&&Math.abs(l-P)<=i.EPSILON*Math.max(1,Math.abs(l),Math.abs(P))&&Math.abs(c-b)<=i.EPSILON*Math.max(1,Math.abs(c),Math.abs(b))&&Math.abs(d-g)<=i.EPSILON*Math.max(1,Math.abs(d),Math.abs(g))};var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t}(s(0));function r(e,t,s){var i=t[0],r=t[1],n=t[2],a=t[3],o=t[4],u=t[5],l=t[6],c=t[7],d=t[8],m=s[0],p=s[1],h=s[2],L=s[3],S=s[4],f=s[5],P=s[6],b=s[7],g=s[8];return e[0]=m*i+p*a+h*l,e[1]=m*r+p*o+h*c,e[2]=m*n+p*u+h*d,e[3]=L*i+S*a+f*l,e[4]=L*r+S*o+f*c,e[5]=L*n+S*u+f*d,e[6]=P*i+b*a+g*l,e[7]=P*r+b*o+g*c,e[8]=P*n+b*u+g*d,e}function n(e,t,s){return e[0]=t[0]-s[0],e[1]=t[1]-s[1],e[2]=t[2]-s[2],e[3]=t[3]-s[3],e[4]=t[4]-s[4],e[5]=t[5]-s[5],e[6]=t[6]-s[6],e[7]=t[7]-s[7],e[8]=t[8]-s[8],e}t.mul=r,t.sub=n},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.forEach=t.sqrLen=t.sqrDist=t.dist=t.div=t.mul=t.sub=t.len=void 0,t.create=r,t.clone=function(e){var t=new i.ARRAY_TYPE(2);return t[0]=e[0],t[1]=e[1],t},t.fromValues=function(e,t){var s=new i.ARRAY_TYPE(2);return s[0]=e,s[1]=t,s},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e},t.set=function(e,t,s){return e[0]=t,e[1]=s,e},t.add=function(e,t,s){return e[0]=t[0]+s[0],e[1]=t[1]+s[1],e},t.subtract=n,t.multiply=a,t.divide=o,t.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e},t.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e},t.min=function(e,t,s){return e[0]=Math.min(t[0],s[0]),e[1]=Math.min(t[1],s[1]),e},t.max=function(e,t,s){return e[0]=Math.max(t[0],s[0]),e[1]=Math.max(t[1],s[1]),e},t.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e},t.scale=function(e,t,s){return e[0]=t[0]*s,e[1]=t[1]*s,e},t.scaleAndAdd=function(e,t,s,i){return e[0]=t[0]+s[0]*i,e[1]=t[1]+s[1]*i,e},t.distance=u,t.squaredDistance=l,t.length=c,t.squaredLength=d,t.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e},t.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},t.normalize=function(e,t){var s=t[0],i=t[1],r=s*s+i*i;return r>0&&(r=1/Math.sqrt(r),e[0]=t[0]*r,e[1]=t[1]*r),e},t.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},t.cross=function(e,t,s){var i=t[0]*s[1]-t[1]*s[0];return e[0]=e[1]=0,e[2]=i,e},t.lerp=function(e,t,s,i){var r=t[0],n=t[1];return e[0]=r+i*(s[0]-r),e[1]=n+i*(s[1]-n),e},t.random=function(e,t){t=t||1;var s=2*i.RANDOM()*Math.PI;return e[0]=Math.cos(s)*t,e[1]=Math.sin(s)*t,e},t.transformMat2=function(e,t,s){var i=t[0],r=t[1];return e[0]=s[0]*i+s[2]*r,e[1]=s[1]*i+s[3]*r,e},t.transformMat2d=function(e,t,s){var i=t[0],r=t[1];return e[0]=s[0]*i+s[2]*r+s[4],e[1]=s[1]*i+s[3]*r+s[5],e},t.transformMat3=function(e,t,s){var i=t[0],r=t[1];return e[0]=s[0]*i+s[3]*r+s[6],e[1]=s[1]*i+s[4]*r+s[7],e},t.transformMat4=function(e,t,s){var i=t[0],r=t[1];return e[0]=s[0]*i+s[4]*r+s[12],e[1]=s[1]*i+s[5]*r+s[13],e},t.rotate=function(e,t,s,i){var r=t[0]-s[0],n=t[1]-s[1],a=Math.sin(i),o=Math.cos(i);return e[0]=r*o-n*a+s[0],e[1]=r*a+n*o+s[1],e},t.angle=function(e,t){var s=e[0],i=e[1],r=t[0],n=t[1],a=s*s+i*i;a>0&&(a=1/Math.sqrt(a));var o=r*r+n*n;o>0&&(o=1/Math.sqrt(o));var u=(s*r+i*n)*a*o;return u>1?0:u<-1?Math.PI:Math.acos(u)},t.str=function(e){return"vec2("+e[0]+", "+e[1]+")"},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]},t.equals=function(e,t){var s=e[0],r=e[1],n=t[0],a=t[1];return Math.abs(s-n)<=i.EPSILON*Math.max(1,Math.abs(s),Math.abs(n))&&Math.abs(r-a)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))};var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t}(s(0));function r(){var e=new i.ARRAY_TYPE(2);return i.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0),e}function n(e,t,s){return e[0]=t[0]-s[0],e[1]=t[1]-s[1],e}function a(e,t,s){return e[0]=t[0]*s[0],e[1]=t[1]*s[1],e}function o(e,t,s){return e[0]=t[0]/s[0],e[1]=t[1]/s[1],e}function u(e,t){var s=t[0]-e[0],i=t[1]-e[1];return Math.sqrt(s*s+i*i)}function l(e,t){var s=t[0]-e[0],i=t[1]-e[1];return s*s+i*i}function c(e){var t=e[0],s=e[1];return Math.sqrt(t*t+s*s)}function d(e){var t=e[0],s=e[1];return t*t+s*s}t.len=c,t.sub=n,t.mul=a,t.div=o,t.dist=u,t.sqrDist=l,t.sqrLen=d,t.forEach=function(){var e=r();return function(t,s,i,r,n,a){var o,u=void 0;for(s||(s=2),i||(i=0),o=r?Math.min(r*s+i,t.length):t.length,u=i;u<o;u+=s)e[0]=t[u],e[1]=t[u+1],n(e,e,a),t[u]=e[0],t[u+1]=e[1];return t}}()},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sqrLen=t.squaredLength=t.len=t.length=t.dot=t.mul=t.setReal=t.getReal=void 0,t.create=function(){var e=new i.ARRAY_TYPE(8);return i.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0),e[3]=1,e},t.clone=function(e){var t=new i.ARRAY_TYPE(8);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t},t.fromValues=function(e,t,s,r,n,a,o,u){var l=new i.ARRAY_TYPE(8);return l[0]=e,l[1]=t,l[2]=s,l[3]=r,l[4]=n,l[5]=a,l[6]=o,l[7]=u,l},t.fromRotationTranslationValues=function(e,t,s,r,n,a,o){var u=new i.ARRAY_TYPE(8);u[0]=e,u[1]=t,u[2]=s,u[3]=r;var l=.5*n,c=.5*a,d=.5*o;return u[4]=l*r+c*s-d*t,u[5]=c*r+d*e-l*s,u[6]=d*r+l*t-c*e,u[7]=-l*e-c*t-d*s,u},t.fromRotationTranslation=o,t.fromTranslation=function(e,t){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=.5*t[0],e[5]=.5*t[1],e[6]=.5*t[2],e[7]=0,e},t.fromRotation=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=0,e[5]=0,e[6]=0,e[7]=0,e},t.fromMat4=function(e,t){var s=r.create();n.getRotation(s,t);var a=new i.ARRAY_TYPE(3);return n.getTranslation(a,t),o(e,s,a),e},t.copy=u,t.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e},t.set=function(e,t,s,i,r,n,a,o,u){return e[0]=t,e[1]=s,e[2]=i,e[3]=r,e[4]=n,e[5]=a,e[6]=o,e[7]=u,e},t.getDual=function(e,t){return e[0]=t[4],e[1]=t[5],e[2]=t[6],e[3]=t[7],e},t.setDual=function(e,t){return e[4]=t[0],e[5]=t[1],e[6]=t[2],e[7]=t[3],e},t.getTranslation=function(e,t){var s=t[4],i=t[5],r=t[6],n=t[7],a=-t[0],o=-t[1],u=-t[2],l=t[3];return e[0]=2*(s*l+n*a+i*u-r*o),e[1]=2*(i*l+n*o+r*a-s*u),e[2]=2*(r*l+n*u+s*o-i*a),e},t.translate=function(e,t,s){var i=t[0],r=t[1],n=t[2],a=t[3],o=.5*s[0],u=.5*s[1],l=.5*s[2],c=t[4],d=t[5],m=t[6],p=t[7];return e[0]=i,e[1]=r,e[2]=n,e[3]=a,e[4]=a*o+r*l-n*u+c,e[5]=a*u+n*o-i*l+d,e[6]=a*l+i*u-r*o+m,e[7]=-i*o-r*u-n*l+p,e},t.rotateX=function(e,t,s){var i=-t[0],n=-t[1],a=-t[2],o=t[3],u=t[4],l=t[5],c=t[6],d=t[7],m=u*o+d*i+l*a-c*n,p=l*o+d*n+c*i-u*a,h=c*o+d*a+u*n-l*i,L=d*o-u*i-l*n-c*a;return r.rotateX(e,t,s),i=e[0],n=e[1],a=e[2],o=e[3],e[4]=m*o+L*i+p*a-h*n,e[5]=p*o+L*n+h*i-m*a,e[6]=h*o+L*a+m*n-p*i,e[7]=L*o-m*i-p*n-h*a,e},t.rotateY=function(e,t,s){var i=-t[0],n=-t[1],a=-t[2],o=t[3],u=t[4],l=t[5],c=t[6],d=t[7],m=u*o+d*i+l*a-c*n,p=l*o+d*n+c*i-u*a,h=c*o+d*a+u*n-l*i,L=d*o-u*i-l*n-c*a;return r.rotateY(e,t,s),i=e[0],n=e[1],a=e[2],o=e[3],e[4]=m*o+L*i+p*a-h*n,e[5]=p*o+L*n+h*i-m*a,e[6]=h*o+L*a+m*n-p*i,e[7]=L*o-m*i-p*n-h*a,e},t.rotateZ=function(e,t,s){var i=-t[0],n=-t[1],a=-t[2],o=t[3],u=t[4],l=t[5],c=t[6],d=t[7],m=u*o+d*i+l*a-c*n,p=l*o+d*n+c*i-u*a,h=c*o+d*a+u*n-l*i,L=d*o-u*i-l*n-c*a;return r.rotateZ(e,t,s),i=e[0],n=e[1],a=e[2],o=e[3],e[4]=m*o+L*i+p*a-h*n,e[5]=p*o+L*n+h*i-m*a,e[6]=h*o+L*a+m*n-p*i,e[7]=L*o-m*i-p*n-h*a,e},t.rotateByQuatAppend=function(e,t,s){var i=s[0],r=s[1],n=s[2],a=s[3],o=t[0],u=t[1],l=t[2],c=t[3];return e[0]=o*a+c*i+u*n-l*r,e[1]=u*a+c*r+l*i-o*n,e[2]=l*a+c*n+o*r-u*i,e[3]=c*a-o*i-u*r-l*n,o=t[4],u=t[5],l=t[6],c=t[7],e[4]=o*a+c*i+u*n-l*r,e[5]=u*a+c*r+l*i-o*n,e[6]=l*a+c*n+o*r-u*i,e[7]=c*a-o*i-u*r-l*n,e},t.rotateByQuatPrepend=function(e,t,s){var i=t[0],r=t[1],n=t[2],a=t[3],o=s[0],u=s[1],l=s[2],c=s[3];return e[0]=i*c+a*o+r*l-n*u,e[1]=r*c+a*u+n*o-i*l,e[2]=n*c+a*l+i*u-r*o,e[3]=a*c-i*o-r*u-n*l,o=s[4],u=s[5],l=s[6],c=s[7],e[4]=i*c+a*o+r*l-n*u,e[5]=r*c+a*u+n*o-i*l,e[6]=n*c+a*l+i*u-r*o,e[7]=a*c-i*o-r*u-n*l,e},t.rotateAroundAxis=function(e,t,s,r){if(Math.abs(r)<i.EPSILON)return u(e,t);var n=Math.sqrt(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]);r*=.5;var a=Math.sin(r),o=a*s[0]/n,l=a*s[1]/n,c=a*s[2]/n,d=Math.cos(r),m=t[0],p=t[1],h=t[2],L=t[3];e[0]=m*d+L*o+p*c-h*l,e[1]=p*d+L*l+h*o-m*c,e[2]=h*d+L*c+m*l-p*o,e[3]=L*d-m*o-p*l-h*c;var S=t[4],f=t[5],P=t[6],b=t[7];return e[4]=S*d+b*o+f*c-P*l,e[5]=f*d+b*l+P*o-S*c,e[6]=P*d+b*c+S*l-f*o,e[7]=b*d-S*o-f*l-P*c,e},t.add=function(e,t,s){return e[0]=t[0]+s[0],e[1]=t[1]+s[1],e[2]=t[2]+s[2],e[3]=t[3]+s[3],e[4]=t[4]+s[4],e[5]=t[5]+s[5],e[6]=t[6]+s[6],e[7]=t[7]+s[7],e},t.multiply=l,t.scale=function(e,t,s){return e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e[3]=t[3]*s,e[4]=t[4]*s,e[5]=t[5]*s,e[6]=t[6]*s,e[7]=t[7]*s,e},t.lerp=function(e,t,s,i){var r=1-i;return c(t,s)<0&&(i=-i),e[0]=t[0]*r+s[0]*i,e[1]=t[1]*r+s[1]*i,e[2]=t[2]*r+s[2]*i,e[3]=t[3]*r+s[3]*i,e[4]=t[4]*r+s[4]*i,e[5]=t[5]*r+s[5]*i,e[6]=t[6]*r+s[6]*i,e[7]=t[7]*r+s[7]*i,e},t.invert=function(e,t){var s=m(t);return e[0]=-t[0]/s,e[1]=-t[1]/s,e[2]=-t[2]/s,e[3]=t[3]/s,e[4]=-t[4]/s,e[5]=-t[5]/s,e[6]=-t[6]/s,e[7]=t[7]/s,e},t.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=t[7],e},t.normalize=function(e,t){var s=m(t);if(s>0){s=Math.sqrt(s);var i=t[0]/s,r=t[1]/s,n=t[2]/s,a=t[3]/s,o=t[4],u=t[5],l=t[6],c=t[7],d=i*o+r*u+n*l+a*c;e[0]=i,e[1]=r,e[2]=n,e[3]=a,e[4]=(o-i*d)/s,e[5]=(u-r*d)/s,e[6]=(l-n*d)/s,e[7]=(c-a*d)/s}return e},t.str=function(e){return"quat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+")"},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]},t.equals=function(e,t){var s=e[0],r=e[1],n=e[2],a=e[3],o=e[4],u=e[5],l=e[6],c=e[7],d=t[0],m=t[1],p=t[2],h=t[3],L=t[4],S=t[5],f=t[6],P=t[7];return Math.abs(s-d)<=i.EPSILON*Math.max(1,Math.abs(s),Math.abs(d))&&Math.abs(r-m)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(m))&&Math.abs(n-p)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(p))&&Math.abs(a-h)<=i.EPSILON*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(o-L)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(L))&&Math.abs(u-S)<=i.EPSILON*Math.max(1,Math.abs(u),Math.abs(S))&&Math.abs(l-f)<=i.EPSILON*Math.max(1,Math.abs(l),Math.abs(f))&&Math.abs(c-P)<=i.EPSILON*Math.max(1,Math.abs(c),Math.abs(P))};var i=a(s(0)),r=a(s(3)),n=a(s(4));function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t}function o(e,t,s){var i=.5*s[0],r=.5*s[1],n=.5*s[2],a=t[0],o=t[1],u=t[2],l=t[3];return e[0]=a,e[1]=o,e[2]=u,e[3]=l,e[4]=i*l+r*u-n*o,e[5]=r*l+n*a-i*u,e[6]=n*l+i*o-r*a,e[7]=-i*a-r*o-n*u,e}function u(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function l(e,t,s){var i=t[0],r=t[1],n=t[2],a=t[3],o=s[4],u=s[5],l=s[6],c=s[7],d=t[4],m=t[5],p=t[6],h=t[7],L=s[0],S=s[1],f=s[2],P=s[3];return e[0]=i*P+a*L+r*f-n*S,e[1]=r*P+a*S+n*L-i*f,e[2]=n*P+a*f+i*S-r*L,e[3]=a*P-i*L-r*S-n*f,e[4]=i*c+a*o+r*l-n*u+d*P+h*L+m*f-p*S,e[5]=r*c+a*u+n*o-i*l+m*P+h*S+p*L-d*f,e[6]=n*c+a*l+i*u-r*o+p*P+h*f+d*S-m*L,e[7]=a*c-i*o-r*u-n*l+h*P-d*L-m*S-p*f,e}t.getReal=r.copy,t.setReal=r.copy,t.mul=l;var c=t.dot=r.dot,d=t.length=r.length,m=(t.len=d,t.squaredLength=r.squaredLength);t.sqrLen=m},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sub=t.mul=void 0,t.create=function(){var e=new i.ARRAY_TYPE(6);return i.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[4]=0,e[5]=0),e[0]=1,e[3]=1,e},t.clone=function(e){var t=new i.ARRAY_TYPE(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},t.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},t.fromValues=function(e,t,s,r,n,a){var o=new i.ARRAY_TYPE(6);return o[0]=e,o[1]=t,o[2]=s,o[3]=r,o[4]=n,o[5]=a,o},t.set=function(e,t,s,i,r,n,a){return e[0]=t,e[1]=s,e[2]=i,e[3]=r,e[4]=n,e[5]=a,e},t.invert=function(e,t){var s=t[0],i=t[1],r=t[2],n=t[3],a=t[4],o=t[5],u=s*n-i*r;return u?(u=1/u,e[0]=n*u,e[1]=-i*u,e[2]=-r*u,e[3]=s*u,e[4]=(r*o-n*a)*u,e[5]=(i*a-s*o)*u,e):null},t.determinant=function(e){return e[0]*e[3]-e[1]*e[2]},t.multiply=r,t.rotate=function(e,t,s){var i=t[0],r=t[1],n=t[2],a=t[3],o=t[4],u=t[5],l=Math.sin(s),c=Math.cos(s);return e[0]=i*c+n*l,e[1]=r*c+a*l,e[2]=i*-l+n*c,e[3]=r*-l+a*c,e[4]=o,e[5]=u,e},t.scale=function(e,t,s){var i=t[0],r=t[1],n=t[2],a=t[3],o=t[4],u=t[5],l=s[0],c=s[1];return e[0]=i*l,e[1]=r*l,e[2]=n*c,e[3]=a*c,e[4]=o,e[5]=u,e},t.translate=function(e,t,s){var i=t[0],r=t[1],n=t[2],a=t[3],o=t[4],u=t[5],l=s[0],c=s[1];return e[0]=i,e[1]=r,e[2]=n,e[3]=a,e[4]=i*l+n*c+o,e[5]=r*l+a*c+u,e},t.fromRotation=function(e,t){var s=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=s,e[2]=-s,e[3]=i,e[4]=0,e[5]=0,e},t.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e},t.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e},t.str=function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},t.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)},t.add=function(e,t,s){return e[0]=t[0]+s[0],e[1]=t[1]+s[1],e[2]=t[2]+s[2],e[3]=t[3]+s[3],e[4]=t[4]+s[4],e[5]=t[5]+s[5],e},t.subtract=n,t.multiplyScalar=function(e,t,s){return e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e[3]=t[3]*s,e[4]=t[4]*s,e[5]=t[5]*s,e},t.multiplyScalarAndAdd=function(e,t,s,i){return e[0]=t[0]+s[0]*i,e[1]=t[1]+s[1]*i,e[2]=t[2]+s[2]*i,e[3]=t[3]+s[3]*i,e[4]=t[4]+s[4]*i,e[5]=t[5]+s[5]*i,e},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]},t.equals=function(e,t){var s=e[0],r=e[1],n=e[2],a=e[3],o=e[4],u=e[5],l=t[0],c=t[1],d=t[2],m=t[3],p=t[4],h=t[5];return Math.abs(s-l)<=i.EPSILON*Math.max(1,Math.abs(s),Math.abs(l))&&Math.abs(r-c)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(n-d)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(a-m)<=i.EPSILON*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(o-p)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(u-h)<=i.EPSILON*Math.max(1,Math.abs(u),Math.abs(h))};var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t}(s(0));function r(e,t,s){var i=t[0],r=t[1],n=t[2],a=t[3],o=t[4],u=t[5],l=s[0],c=s[1],d=s[2],m=s[3],p=s[4],h=s[5];return e[0]=i*l+n*c,e[1]=r*l+a*c,e[2]=i*d+n*m,e[3]=r*d+a*m,e[4]=i*p+n*h+o,e[5]=r*p+a*h+u,e}function n(e,t,s){return e[0]=t[0]-s[0],e[1]=t[1]-s[1],e[2]=t[2]-s[2],e[3]=t[3]-s[3],e[4]=t[4]-s[4],e[5]=t[5]-s[5],e}t.mul=r,t.sub=n},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sub=t.mul=void 0,t.create=function(){var e=new i.ARRAY_TYPE(4);return i.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},t.clone=function(e){var t=new i.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},t.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},t.fromValues=function(e,t,s,r){var n=new i.ARRAY_TYPE(4);return n[0]=e,n[1]=t,n[2]=s,n[3]=r,n},t.set=function(e,t,s,i,r){return e[0]=t,e[1]=s,e[2]=i,e[3]=r,e},t.transpose=function(e,t){if(e===t){var s=t[1];e[1]=t[2],e[2]=s}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e},t.invert=function(e,t){var s=t[0],i=t[1],r=t[2],n=t[3],a=s*n-r*i;return a?(a=1/a,e[0]=n*a,e[1]=-i*a,e[2]=-r*a,e[3]=s*a,e):null},t.adjoint=function(e,t){var s=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=s,e},t.determinant=function(e){return e[0]*e[3]-e[2]*e[1]},t.multiply=r,t.rotate=function(e,t,s){var i=t[0],r=t[1],n=t[2],a=t[3],o=Math.sin(s),u=Math.cos(s);return e[0]=i*u+n*o,e[1]=r*u+a*o,e[2]=i*-o+n*u,e[3]=r*-o+a*u,e},t.scale=function(e,t,s){var i=t[0],r=t[1],n=t[2],a=t[3],o=s[0],u=s[1];return e[0]=i*o,e[1]=r*o,e[2]=n*u,e[3]=a*u,e},t.fromRotation=function(e,t){var s=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=s,e[2]=-s,e[3]=i,e},t.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e},t.str=function(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},t.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2))},t.LDU=function(e,t,s,i){return e[2]=i[2]/i[0],s[0]=i[0],s[1]=i[1],s[3]=i[3]-e[2]*s[1],[e,t,s]},t.add=function(e,t,s){return e[0]=t[0]+s[0],e[1]=t[1]+s[1],e[2]=t[2]+s[2],e[3]=t[3]+s[3],e},t.subtract=n,t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},t.equals=function(e,t){var s=e[0],r=e[1],n=e[2],a=e[3],o=t[0],u=t[1],l=t[2],c=t[3];return Math.abs(s-o)<=i.EPSILON*Math.max(1,Math.abs(s),Math.abs(o))&&Math.abs(r-u)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(n-l)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(a-c)<=i.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))},t.multiplyScalar=function(e,t,s){return e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e[3]=t[3]*s,e},t.multiplyScalarAndAdd=function(e,t,s,i){return e[0]=t[0]+s[0]*i,e[1]=t[1]+s[1]*i,e[2]=t[2]+s[2]*i,e[3]=t[3]+s[3]*i,e};var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t}(s(0));function r(e,t,s){var i=t[0],r=t[1],n=t[2],a=t[3],o=s[0],u=s[1],l=s[2],c=s[3];return e[0]=i*o+n*u,e[1]=r*o+a*u,e[2]=i*l+n*c,e[3]=r*l+a*c,e}function n(e,t,s){return e[0]=t[0]-s[0],e[1]=t[1]-s[1],e[2]=t[2]-s[2],e[3]=t[3]-s[3],e}t.mul=r,t.sub=n},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vec4=t.vec3=t.vec2=t.quat2=t.quat=t.mat4=t.mat3=t.mat2d=t.mat2=t.glMatrix=void 0;var i=p(s(0)),r=p(s(9)),n=p(s(8)),a=p(s(5)),o=p(s(4)),u=p(s(3)),l=p(s(7)),c=p(s(6)),d=p(s(2)),m=p(s(1));function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t}t.glMatrix=i,t.mat2=r,t.mat2d=n,t.mat3=a,t.mat4=o,t.quat=u,t.quat2=l,t.vec2=c,t.vec3=d,t.vec4=m}])})},{}]},{},["C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\main.js"])("C:\\Users\\10zil\\OneDrive\\Documents\\Visual Studio 2017\\Projects\\Web\\WebGL BSP\\.tmp\\main.js")});
//# sourceMappingURL=WebBSP.js.map
